	<style>
	.remarkbtn 
{

  position: fixed;
  z-index: 2;
  top:85%;
  right: 0;
  background-color: #509796;
  overflow-x: visible;
  transition: 0.5s;
 
}
.remarkcontent
{
  width:100%;	
  position: fixed;
  z-index: 1;
  height: 80%;
  top: 0;
  left: 28%;
  right:10%;
  background-color: #FFFFFF;
  overflow-x: scroll;
  overflow-y: scroll;
  transition: 0.8s;
 }
 .alert-warning {
    color: #1F2D3D;
    background: #ffffff;
    border-color: #edb100;
}
</style>

<div>
  <a id="remarksShow" style="display:none" class="btn btn-primary remarkbtn" data-toggle="collapse" href="#remarkWindow" role="button" aria-expanded="false"
    aria-controls="multiCollapseExample1"><i class="fa fa-tags"></i>Remarks</a>
 </div>
<!--/ Collapse buttons -->

<!-- Collapsible content -->
<div class="row remarkcontent collapse multi-collapse"  id="remarkWindow" >
  <div class="form-group">
    <div class="table-responsive">
	    <table class="table" style:"word-wrap: break-word">
	      <thead>
		    <tr>
		      <th scope="col">Comments</th>
		    </tr>
		  </thead>
		  <tbody id="oldMessages"></tbody>
	    </table>
     </div>
	<hr>
	<div id="enterRemarks">
   	<label for="exampleFormControlTextarea1">Remarks/Comments</label>
    <textarea class="form-control" id="spcomment" name="spcomment"></textarea>
 	 <a class="btn btn-primary" data-toggle="collapse" id="messageSubmission" role="button" aria-expanded="false"
   	  aria-controls="multiCollapseExample1"><i class="fa fa-tags"></i>Save comment</a>
   	 <a class="btn btn-primary" data-toggle="collapse" href="#remarkWindow" role="button" aria-expanded="true"
   	 aria-controls="multiCollapseExample1"><i class="fa fa-tags"></i>Close</a>
   	 </div>
   </div>
   <hr>
   <hr>
   <hr>
   <hr>
   <hr>
   <hr>
   <br>
   <br>
</div>
<script>
var globalProgramCode;
var globalProgramId;
var globalBatchCode;
var globalBatchId;
var globalStatus;
var studentDocMap={};
var rooturl="https://ams.nuals.ac.in"
function saveRecordTimeLine(processId,processName,status)
{
	$.ajax(
	{
		url:'/students/saveTimeLine',
		data:{'studentCode':processId,'processName':processName,'processStatus':status},
		type:"post",
		success:function(data)
		{
			console.log(data);
		}
	});
}
function getRecordTimeLines(processId,processName)
{
	$.ajax(
	{
		"url":"/masterdata/getMasterDataRecordTimeLines",////
		"method":"GET",
		"data":{"processId":processId,"processName":processName},
		success:function(data)
		{
			if(data)
			{
				for(var i=0;i<data.length;i++)
				{
					data[i]['mdtlDate']=data[i]['mdtlDate'].split('T')[0];
				}
				setUpDataTable(data,[{"mdtlProcessId":"Student Admission Code"},{"activityLog":"Record Log"},{"mdtllUserCode":"By User"},{"mdtltlStatus":"Status Set"},{"mdtlDate":"on"}],"gridTableStudentPersonal",null);
				$( "#accordion1" ).accordion({active: 0,collapsible: true,active: 'none', heightStyle: "content" ,autoHeight: false,navigation: true });
			}
		}
	});
}
function getRecordTimeLines2(processId,processName)
{
	$.ajax(
	{
		"url":"/masterdata/getMasterDataRecordTimeLines",////
		"method":"GET",
		"data":{"processId":processId,"processName":processName},
		success:function(data)
		{
			if(data)
			{
				for(var i=0;i<data.length;i++)
				{
					data[i]['mdtlDate']=data[i]['mdtlDate'].split('T')[0];
				}
				setUpDataTable(data,[{"mdtlProcessId":"Student Admission Code"},{"activityLog":"Record Log"},{"mdtllUserCode":"By User"},{"mdtltlStatus":"Status Set"},{"mdtlDate":"on"}],"gridTableStudentClat",null);
				$( "#accordion2" ).accordion({active: 0,collapsible: true,active: 'none', heightStyle: "content" ,autoHeight: false,navigation: true });
			}
		}
	});
}
function getRecordTimeLines3(processId,processName)
{
	$.ajax(
	{
		"url":"/masterdata/getMasterDataRecordTimeLines",////
		"method":"GET",
		"data":{"processId":processId,"processName":processName},
		success:function(data)
		{
			if(data)
			{
				for(var i=0;i<data.length;i++)
				{
					data[i]['mdtlDate']=data[i]['mdtlDate'].split('T')[0];
				}
				setUpDataTable(data,[{"mdtlProcessId":"Student Admission Code"},{"activityLog":"Record Log"},{"mdtllUserCode":"By User"},{"mdtltlStatus":"Status Set"},{"mdtlDate":"on"}],"gridTableStudentAdmission",null);
				$( "#accordion3" ).accordion({active: 0,collapsible: true,active: 'none', heightStyle: "content" ,autoHeight: false,navigation: true });
			}
		}
	});
}
function getRecordTimeLines4(processId,processName)
{
	$.ajax(
	{
		"url":"/masterdata/getMasterDataRecordTimeLines",////
		"method":"GET",
		"data":{"processId":processId,"processName":processName},
		success:function(data)
		{
			if(data)
			{
				for(var i=0;i<data.length;i++)
				{
					data[i]['mdtlDate']=data[i]['mdtlDate'].split('T')[0];
				}
				setUpDataTable(data,[{"mdtlProcessId":"Student Admission Code"},{"activityLog":"Record Log"},{"mdtllUserCode":"By User"},{"mdtltlStatus":"Status Set"},{"mdtlDate":"on"}],"gridTable4",null);
				$( "#accordion4" ).accordion({active: 0,collapsible: true,active: 'none', heightStyle: "content" ,autoHeight: false,navigation: true });
			}
		}
	});
}
function getRecordTimeLines5(processId,processName)
{
	$.ajax(
	{
		"url":"/masterdata/getMasterDataRecordTimeLines",////
		"method":"GET",
		"data":{"processId":processId,"processName":processName},
		success:function(data)
		{
			if(data)
			{
				for(var i=0;i<data.length;i++)
				{
					data[i]['mdtlDate']=data[i]['mdtlDate'].split('T')[0];
				}
				setUpDataTable(data,[{"mdtlProcessId":"Student Admission Code"},{"activityLog":"Record Log"},{"mdtllUserCode":"By User"},{"mdtltlStatus":"Status Set"},{"mdtlDate":"on"}],"gridTable5",null);
				$( "#accordion5" ).accordion({active: 0,collapsible: true,active: 'none', heightStyle: "content" ,autoHeight: false,navigation: true });
			}
		}
	});
}
function fillMessageWindow(data)
{
	$('#oldMessages').empty();
	try
	{
		for(let i=0;i<data.length;i++)
		{
			var div=$('<tr><td><div id="div-'+String(i)+'" class="alert alert-warning msg" role="alert">'+data[i]['spcommenteduser']+' : '+ data[i]['spcomment']+'<sub>'+data[i]['spcommentdate']+'</sub></div></td></tr>');
			$('#oldMessages').append(div).show();
			$('.alert-warning').css("background","");
			$('.alert-warning').css("border-color","")
		//	$('#div-'+String(i)).css("background","")
		//	$('#div-'+String(i)).css("border-color","")
		}
		$('#enterRemarks').focus();
	}
	catch(e)
	{
		alert(e);
	}
}
function getStudentPinNotes()
{
	$.ajax(
	{
		url:"/students/getStudentPinNotes",
		type:"GET",
		data:{"spstudentcode":SelectedOrMappedUser},
		success:function(data)
		{
			console.log(data);
			fillMessageWindow(data);
		}
	}); 
}
	function submitpinNotes()
	{
		$.ajax(
		{
			url:"/students/addStudentPinNotes",
			type:"post",
			data:{"spcomment":$('#spcomment').val(),"spstudentcode":SelectedOrMappedUser},
			success:function(data)
			{
				$('#spcomment').val('');
				getStudentPinNotes();
			}
		});
	}
	$('#messageSubmission').on('click',function()
	{
		submitpinNotes();
	})
</script>

	
<div class="row well">
		<div class="col-md-4">
		    <label for="accountName">Select Program</label>
		    <select class="form-control grouping" id="selectProgram"></select>
		</div>
		<div class="col-md-4">
		    <label for="accountName">Select Batch</label>
		    <select class="form-control grouping" id="selectBatch"></select>
		</div>
		<div class="col-md-4">
		    <label for="selectStatus">Select Student Status</label>
		    <select class="form-control grouping" id="selectStatus">
		    <option value="invalid">invalid</option>
	    	<option value="processing">Verified</option>
		    <option value="valid">Approved</option>
		    </select>
		</div>
</div> 
<hr>
<div class="row">
		<div class="col-md-4"></div>
		<div class="col-md-4"><button id="btnCallStudents" class="btn btn-primary form-control">Apply</button></div>
		<div class="col-md-4"></div>
</div>
<hr>
<div class="table-responsive cell-border well">
	<table id="gridTable" class="table table-striped"></table>
</div>
<div class="row">
	<div class="col-md-12">
		<div id="accordionDocDiv">
			<h3>Documents</h3>
				<div>
				 <div id="accordionDoc">
				  <h3>Personal Files</h3>
				  <div>
				    <p>
			    	 <div class="table-responsive">
			    		<table class="table table-striped">
		    			  <thead>
						    <tr>
						      <th scope="col">Doc Name</th>
						      <th scope="col">Existing Doc</th>
						    </tr>
						  </thead>
						  <tbody id="personalFileTable">
						  <tr><td>Aadhar</td><td><button class="getFile" ext="jpg" doc="aadhar"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
						  <tr><td>Passport</td><td><button class="getFile" ext="jpg" doc="passport"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
						  <tr><td>Voter's Id</td><td><button class="getFile" ext="jpg" doc="voterid"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
						  <tr><td>Driving License</td><td><button ext="jpg" class="getFile" doc="dl"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
						  <tr><td>Community/Caste Certificate</td><td><button ext="jpg" class="getFile" doc="community"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
						   <tr><td>Non Creamy-Layer Certificate</td><td><button ext="jpg" class="getFile" doc="noncreamy"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
						  <tr><td>Other                      </td><td><button ext="jpg" class="getFile" doc="other"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
						  </tbody>
			    		</table> 
			    	 </div>
			    	</p>
	  			</div>
	  			<h3>CLAT Files</h3>
				  <div>
				    <p>
			    	 <div class="table-responsive">
			    		<table class="table table-striped">
		    			  <thead>
						    <tr>
						      <th scope="col">Doc Name</th>
						      <th scope="col">Existing Doc</th>
						    </tr>
						  </thead>
						  <tbody id="clatFileTable">
						  <tr><td>CLAT Admit Card</td><td><button class="getFile" ext="jpg" doc="docClatAdmitCard"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
						  <tr><td>CLAT Score</td><td><button class="getFile" ext="jpg" doc="docClatScore"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
						  </tbody>
			    		</table> 
			    	 </div>
			    	</p>
	  			</div>
	  			 <h3>Qualifications</h3>
  				<div>
   				 <p>
		    	 <div class="table-responsive">
		    		<table class="table table-striped">
	    			  <thead>
					    <tr>
					      <th scope="col">Qualification</th>
					      <th scope="col">Existing Doc</th>
					    </tr>
					  </thead>
					  <tbody id="eduFileTable">
					  
					  </tbody>
		    		</table> 
		    	 </div>
		    	    </p>
 				 </div>
 				<h3>Student Photo</h3>
  				<div>
   				 <p>
		    	 <div class="table-responsive">
		    		<table class="table table-striped">
	    			  <thead>
					    <tr>
					      <th scope="col">Student Photo</th>
					      <th scope="col">Existing Image</th>
					    </tr>
					    </thead>
					    <tbody>
					   <tr><td>Photo</td><td><button class="getFile" ext="jpg" doc="studentImage"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
					    </tbody>
					  
		    		</table> 
		    	 </div>
		    	    </p>
 				 </div>
 				  				<h3>Other Docs</h3>
  				<div>
   				 <p>
		    	 <div class="table-responsive" id="otherDocs">
		    		<table class="table table-striped">
	    			  <thead>
					    <tr>
					      <th scope="col">Doc Name</th>
					      <th scope="col">Existing Image</th>
					    </tr>
					    </thead>
					    <tbody>
					   <tr><td>TC</td><td><button class="getFile" ext="jpg" doc="docTC"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
					   <tr><td>Course Conduct</td><td><button class="getFile" ext="jpg" doc="doccourseConduct"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
					   <tr><td>Migration</td><td><button class="getFile" ext="jpg" doc="docMigration"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
					    </tbody>
					</table> 
		    	 </div>
		    	    </p>
 				 </div> 
 				 <h3 id="nriDocsHead" style="display:none">NRI Docs</h3>
  				<div id="nriDocs" style="display:none">
   				 <p>
		    	 <div class="table-responsive" >
		    		<table class="table table-striped">
	    			  <thead>
					    <tr>
					      <th scope="col">Doc Name</th>
					      <th scope="col">Existing Image</th>
					    </tr>
					    </thead>
					    <tbody>
					      <tr><td>Sponsor Passport</td><td><button ext="jpg" class="getFile" doc="docSponsorPass"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
					       <tr><td>Sponsor Resident Permit</td><td><button ext="jpg" class="getFile" doc="docSponsorResidentPermit"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
					       <tr><td>Indian Embassy Certificate</td><td><button ext="jpg" class="getFile" doc="docIndianEmbassy"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
					       <tr><td>Sponsor Undertaking</td><td><button ext="jpg" class="getFile" doc="docSponsorUndertaking"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
					    </tbody>
					</table> 
		    	 </div>
		    	    </p>
 				 </div>
 				 
 				<h3 id="fnDocsHead" style="display:none">Foreign National Docs</h3>
  				<div id="fnDocs" style="display:none">
   				 <p>
		    	 <div class="table-responsive">
		    		<table class="table table-striped">
	    			  <thead>
					    <tr>
					      <th scope="col">Doc Name</th>
					      <th scope="col">Existing Image</th>
					    </tr>
					    </thead>
					    <tbody>
				   	       <tr><td>Parent Passport-1</td><td><button ext="jpg" class="getFile" doc="docParentPass1"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
					       <tr><td>Parent Passport-2</td><td><button ext="jpg" class="getFile" doc="docParentPass2"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
							<tr><td>Percentage Conversion</td><td><button ext="jpg" class="getFile" doc="docPercentageConversion"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>
					    </tbody>
					</table> 
		    	 </div>
		    	    </p>
 				 </div>
		    	</div> 
  			</div>
  			</div>
  		</div>
</div>
<div style="display:none" id="tabs">
  <ul>
    <li><a href="#tabs-1">Personal</a></li>
    <li><a href="#tabs-2">Clat</a></li>
    <li><a href="#tabs-3">Education</a></li>
    <li><a href="#tabs-4">Guardian</a></li>
    <li><a href="#tabs-5">Bank</a></li>
    <li><a href="#tabs-6">Admission</a></li>
  </ul>
    <div id="tabs-1">
    	<p>
    	<form id="formStudentPersonal">
			<div class="form-group" id="divStudentPersonal">
		    	<h1>Personal </h1>
				<hr>
				<label for="studentPersonalStudentName"><b>Name</b></label>	
				<div class="input-group">
					<input type="text" class="form-control"  placeholder="Enter Student Name" name="studentPersonalStudentName" id="studentPersonalStudentName" readonly required></input>
    				 <span   class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentPersonalStudentName"></i></span>
  				</div>
				<br>
					<label for="studentEmail"><b>Email</b></label>
				   	 <input type="text" readonly class="form-control" id="studentEmail"></input>	
					<br>
					<label for="studentMobile"><b>Mobile</b></label>
				   	 <input type="text" readonly class="form-control" id="studentMobile"></input>	
				<br>
				<label for="aadhar"><b>Aadhar</b></label>
				<div class="input-group">
					<input type="text"  class="form-control"  placeholder="Enter Aadhar" name="studentPersonalAadhar"  id="studentPersonalAadhar" readonly></input>
					<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentPersonalAadhar"></i></span>
				</div>
				<br>
				<label for="gender"><b>Gender</b></label>
				<div class="input-group">
					<select name="studentPersonalGender" id="studentPersonalGender"  class="form-control studentPersonalSel" disabled required>
						<option value="m">Male</option>
						<option value="f">Female</option>
				    	<option value="o">Others</option>
				    </select>
				    <span   class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="studentPersonalGender"></i></span>
				 </div>
				<br>
	            <label for="dob"><b>Date of Birth</b></label>
	            <div class="input-group">
					<input  class="form-control"  type="text" id="studentPersonalDob" name="studentPersonalDobDummy" readonly></p>
					<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentPersonalDob"></i></span>
				</div>
				<br>
				
				<label for="dob"><b>Age on admission</b></label>
	            <div class="input-group">
					<input  class="form-control"  type="text" id="ageOnAdmission" name="studentPersonalAgeOnAdmission" readonly></p>
					<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="ageOnAdmission"></i></span>
				</div>
				<br>
				
				<label for="religion"><b>Religion</b></label>
				<div class="input-group">
			    	<select name="studentPersonalMappedReligion" id="selectReligion"  class="form-control studentPersonalSel" disabled></select>
			    	<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="selectReligion"></i></span>
			    </div>	
			    <br>
				<!-- <label for="category"><b>Category</b></label>
				<div class="input-group">
					<select name="studentPersonalMappedCategory" id="selectCategory"  class="form-control studentPersonalSel" disabled></select>
					<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="selectCategory"></i></span>
				</div>
				<br>-->
				<label for="caste"><b>caste</b></label>
				<div class="input-group">
					<select name="studentPersonalMappedCaste" id="selectReligionCaste"  class="form-control studentPersonalSel" disabled></select>
					<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="selectReligionCaste"></i></span>
				</div>
				<br>
				 <label for="studentPersonalMappedCommunity"><b>Community</b></label>
				 <div class="input-group">
				    <select name="studentPersonalMappedCommunity" id="selectCommunity"  class="form-control" disabled>  </select>
				    <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="selectCommunity" ></i></span>
				   </div>
				   <br>
				<label for="mt"><b>Mother Tongue</b></label>
				<div class="input-group">
			    	<select name="studentPersonalMotherTounge" id="mt"  class="form-control studentPersonalSel" disabled>
					<option value="NA">Select</option>
						<option value="Assamese">Assamese</option>
					<option value="Bengali">Bengali</option>
					<option value="Bodo">Bodo</option>
					<option value="Dogri">Dogri</option>
					<option value="English">English</option>
					<option value="Gujarati">Gujarati</option>
					<option value="Hindi">Hindi</option>
					<option value="Kannada">Kannada</option>
					<option value="Kashmiri">Kashmiri</option>
					<option value="Konkani">Konkani</option>
					<option value="Maithili">Maithili</option>
					<option value="Malayalam">Malayalam</option>
					<option value="Manipuri">Manipuri</option>
					<option value="Marathi">Marathi</option>
					<option value="Nepali">Nepali</option>
					<option value="Odia">Odia</option>
					<option value="Punjabi">Punjabi</option>
					<option value="Sanskrit">Sanskrit</option>
					<option value="Santhali">Santhali</option>
					<option value="Sindhi">Sindhi</option>
					<option value="Tamil">Tamil</option>
					<option value="Telugu">Telugu</option>
					<option value="Tulu">Tulu</option>
					<option value="Urdu">Urdu</option>

			    	</select>
			    	<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="mt"></i></span>	
			    </div>
			    <hr>
			    <label for="studentPersonalPermanentAddress">Permanent Address:</label>
			    <div class="input-group">
			     <textarea required class="form-control" rows="5" name="studentPersonalPermanentAddress" id="studentPersonalPermanentAddress" readonly></textarea>
			     <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentPersonalPermanentAddress"></i></span>
			    </div> 
 				  <label for="studentPersonalCommunicationAddress">Communication Address:</label>
 				<div class="input-group">
 					<textarea required class="form-control" rows="5" name="studentPersonalCommunicationAddress" id="studentPersonalCommunicationAddress" readonly></textarea>
 					<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentPersonalCommunicationAddress"></i></span>
 				</div>
 				 <hr>
   			 <label for="mt"><b>Blood Group</b></label>
   			 	<div class="input-group">
				    <select name="studentPersonalBloodGroup" id="studentPersonalBloodGroup"  class="form-control" disabled>
				    	<option value="">Select</option>
				    	<option value="A+">A+</option>
				    	<option value="O+">O+</option>
				    	<option value="B+">B+</option>
				    	<option value="AB+">AB+</option>
				    	<option value="A-">A-</option>
				    	<option value="O-">O-</option>
				    	<option value="B-">B-</option>
				    	<option value="AB-">AB-</option>
				    </select>
				    <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="studentPersonalBloodGroup"></i></span>
				    <hr>
				  </div>
				  
				  <br>
				  <label for="studentPersonalPassport"><b>Passport No:</b></label>
				  <div class="input-group">
				   	 <input readonly type="text" class="form-control"  title="Passport No: of Student(Mandatory if Foreign Candidate)" id="studentPersonalPassport" name="studentPersonalPassport"></input>
				   	 <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentPersonalPassport"></i></span>
				   </div>	 
				   <br>
				  <label for="studentPersonalCountry"><b>Nationality</b></label>
				  <div class="input-group">
				   <select id="studentPersonalCountry" name="studentPersonalCountry" class="form-control" disabled>
				   <option value="Afghan">Afghan</option>
<option value="Albanian">Albanian</option>
<option value="Algerian">Algerian</option>
<option value="American">American</option>
<option value="Andorran">Andorran</option>
<option value="Angolan">Angolan</option>
<option value="Antiguan or Barbudan">Antiguan or Barbudan</option>
<option value="Argentine">Argentine</option>
<option value="Armenian">Armenian</option>
<option value="Aruban">Aruban</option>
<option value="Australian">Australian</option>
<option value="Austrian">Austrian</option>
<option value="Azerbaijani">Azerbaijani</option>
<option value="Bahamian">Bahamian</option>
<option value="Bahraini">Bahraini</option>
<option value="Bangladeshi">Bangladeshi</option>
<option value="Barbadian">Barbadian</option>
<option value="Basque">Basque</option>
<option value="Belarusian">Belarusian</option>
<option value="Belgian">Belgian</option>
<option value="Belizean">Belizean</option>
<option value="Beninese">Beninese</option>
<option value="Bermudian">Bermudian</option>
<option value="Bhutanese">Bhutanese</option>
<option value="Bolivian">Bolivian</option>
<option value="Bosnian">Bosnian</option>
<option value="Bosnian or Herzegovinian">Bosnian or Herzegovinian</option>
<option value="Botswanan">Botswanan</option>
<option value="Brazilian">Brazilian</option>
<option value="Breton">Breton</option>
<option value="British">British</option>
<option value="Bruneian">Bruneian</option>
<option value="Bulgarian">Bulgarian</option>
<option value="Burkinabé">Burkinabé</option>
<option value="Burmese">Burmese</option>
<option value="Burundian">Burundian</option>
<option value="Cambodian">Cambodian</option>
<option value="Cameroonian">Cameroonian</option>
<option value="Canadian">Canadian</option>
<option value="Catalan">Catalan</option>
<option value="Cape Verdean">Cape Verdean</option>
<option value="Chadian">Chadian</option>
<option value="Chilean">Chilean</option>
<option value="Chinese">Chinese</option>
<option value="Colombian">Colombian</option>
<option value="Comorian">Comorian</option>
<option value="Congolese DRC">Congolese DRC</option>
<option value="Congolese RotC">Congolese RotC</option>
<option value="Costa Rican">Costa Rican</option>
<option value="Croatian">Croatian</option>
<option value="Cuban">Cuban</option>
<option value="Cypriot">Cypriot</option>
<option value="Czech">Czech</option>
<option value="Danish">Danish</option>
<option value="Djiboutian">Djiboutian</option>
<option value="Dominican Commonwealth">Dominican Commonwealth</option>
<option value="Dominican Republic">Dominican Republic</option>
<option value="Dutch">Dutch</option>
<option value="East Timorese">East Timorese</option>
<option value="Ecuadorian">Ecuadorian</option>
<option value="Egyptian">Egyptian</option>
<option value="Emiratis">Emiratis</option>
<option value="English">English</option>
<option value="Equatoguinean">Equatoguinean</option>
<option value="Eritrean">Eritrean</option>
<option value="Estonian">Estonian</option>
<option value="Ethiopian">Ethiopian</option>
<option value="Falkland Islander">Falkland Islander</option>
<option value="Faroese">Faroese</option>
<option value="Fijian">Fijian</option>
<option value="Finnish">Finnish</option>
<option value="Filipino">Filipino</option>
<option value="French">French</option>
<option value="Gabonese">Gabonese</option>
<option value="Gambian">Gambian</option>
<option value="Georgian">Georgian</option>
<option value="German">German</option>
<option value="Ghanaian">Ghanaian</option>
<option value="Gibraltarian">Gibraltarian</option>
<option value="Greek">Greek</option>
<option value="Grenadian">Grenadian</option>
<option value="Guatemalan">Guatemalan</option>
<option value="Guinean">Guinean</option>
<option value="Guinean Bissau">Guinean Bissau</option>
<option value="Guyanese">Guyanese</option>
<option value="Haitian">Haitian</option>
<option value="Honduran">Honduran</option>
<option value="Hong Konger">Hong Konger</option>
<option value="Hungarian">Hungarian</option>
<option value="Icelandic">Icelandic</option>
<option value="I-Kiribati">I-Kiribati</option>
<option value="Indian">Indian</option>
<option value="Indonesian">Indonesian</option>
<option value="Iranian">Iranian</option>
<option value="Iraqi">Iraqi</option>
<option value="Irish">Irish</option>
<option value="Israeli">Israeli</option>
<option value="Italian">Italian</option>
<option value="Ivorian">Ivorian</option>
<option value="Jamaican">Jamaican</option>
<option value="Japanese">Japanese</option>
<option value="Jordanian">Jordanian</option>
<option value="Kazakh">Kazakh</option>
<option value="Kenyan">Kenyan</option>
<option value="North Korean">North Korean</option>
<option value="South Korean">South Korean</option>
<option value="Kosovar">Kosovar</option>
<option value="Kuwaiti">Kuwaiti</option>
<option value="Kyrgyz">Kyrgyz</option>
<option value="Lao">Lao</option>
<option value="Latvian">Latvian</option>
<option value="Lebanese">Lebanese</option>
<option value="Liberian">Liberian</option>
<option value="Libyan">Libyan</option>
<option value="Liechtensteiner">Liechtensteiner</option>
<option value="Lithuanian">Lithuanian</option>
<option value="Luxembourger">Luxembourger</option>
<option value="Macedonian">Macedonian</option>
<option value="Malagasy">Malagasy</option>
<option value="Malawian">Malawian</option>
<option value="Malaysian">Malaysian</option>
<option value="Maldivian">Maldivian</option>
<option value="Malian">Malian</option>
<option value="Maltese">Maltese</option>
<option value="Marshallese">Marshallese</option>
<option value="Mauritanian">Mauritanian</option>
<option value="Mauritian">Mauritian</option>
<option value="Mexican">Mexican</option>
<option value="Micronesian">Micronesian</option>
<option value="Moldovan">Moldovan</option>
<option value="Monégasque">Monégasque</option>
<option value="Mongolian">Mongolian</option>
<option value="Montenegrin">Montenegrin</option>
<option value="Moroccan">Moroccan</option>
<option value="Mozambican">Mozambican</option>
<option value="Namibian">Namibian</option>
<option value="Nauruan">Nauruan</option>
<option value="Nepalese">Nepalese</option>
<option value="Netherlander">Netherlander</option>
<option value="New Zealand Zelanian">New Zealand Zelanian</option>
<option value="Nicaraguan">Nicaraguan</option>
<option value="Nigerien">Nigerien</option>
<option value="Nigerian">Nigerian</option>
<option value="Norwegian">Norwegian</option>
<option value="Omani">Omani</option>
<option value="Pakistani">Pakistani</option>
<option value="Palauan">Palauan</option>
<option value="Palestinian">Palestinian</option>
<option value="Panamanian">Panamanian</option>
<option value="Papua New Guinean">Papua New Guinean</option>
<option value="Paraguayan">Paraguayan</option>
<option value="Peruvian">Peruvian</option>
<option value="Polish">Polish</option>
<option value="Portuguese">Portuguese</option>
<option value="Puerto Rican">Puerto Rican</option>
<option value="Qatari">Qatari</option>
<option value="Quebecer">Quebecer</option>
<option value="Romanian">Romanian</option>
<option value="Russian">Russian</option>
<option value="Rwandan">Rwandan</option>
<option value="Saint Kittitian or Nevisian">Saint Kittitian or Nevisian</option>
<option value="Saint Lucian">Saint Lucian</option>
<option value="Saint Vincentian">Saint Vincentian</option>
<option value="Samoan">Samoan</option>
<option value="Sammarinese">Sammarinese</option>
<option value="Sao Toméan">Sao Toméan</option>
<option value="Saudi Arabian">Saudi Arabian</option>
<option value="Senegalese">Senegalese</option>
<option value="Serbian">Serbian</option>
<option value="Seychellois">Seychellois</option>
<option value="Sierra Leonean">Sierra Leonean</option>
<option value="Singaporean">Singaporean</option>
<option value="Slovak">Slovak</option>
<option value="Slovenian">Slovenian</option>
<option value="Solomon Island">Solomon Island</option>
<option value="Somali">Somali</option>
<option value="South African">South African</option>
<option value="South Sudanese">South Sudanese</option>
<option value="Spanish">Spanish</option>
<option value="Sri Lankan">Sri Lankan</option>
<option value="Sudanese">Sudanese</option>
<option value="Surinamese">Surinamese</option>
<option value="Swazi">Swazi</option>
<option value="Swedish">Swedish</option>
<option value="Swiss">Swiss</option>
<option value="Syrian">Syrian</option>
<option value="Tajikistani">Tajikistani</option>
<option value="Tanzanian">Tanzanian</option>
<option value="Thai">Thai</option>
<option value="Timorese">Timorese</option>
<option value="Togolese">Togolese</option>
<option value="Tokelauan">Tokelauan</option>
<option value="Tongan">Tongan</option>
<option value="Trinidadian or Tobagonian">Trinidadian or Tobagonian</option>
<option value="Tunisian">Tunisian</option>
<option value="Turkish">Turkish</option>
<option value="Tuvaluan">Tuvaluan</option>
<option value="Ugandan">Ugandan</option>
<option value="Ukrainian">Ukrainian</option>
<option value="Uruguayan">Uruguayan</option>
<option value="Uzbekistani">Uzbekistani</option>
<option value="Vanuatuan">Vanuatuan</option>
<option value="Vatican">Vatican</option>
<option value="Venezuelan">Venezuelan</option>
<option value="Vietnamese">Vietnamese</option>
<option value="Welsh">Welsh</option>
<option value="Yemeni">Yemeni</option>
<option value="Zambian">Zambian</option>
<option value="Zimbabwean">Zimbabwean</option>
					 </select>
					 <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="studentPersonalCountry"></i></span>
				  </div>
				  
				  
				  <!-- <label for="studentPersonalAllergyDetails">Details of Allergy if any:</label>
				  <div class="input-group">
 					 <textarea   class="form-control abled" rows="5" name="studentPersonalAllergyDetails" id="studentPersonalAllergyDetails" readonly></textarea>
 					 <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentPersonalAllergyDetails"></i></span>
 					</div> 
 				   <hr>-->
				 <div class="form-check">
			    		<input type="checkbox" class="form-check-input" name="studentPersonalSpeciallyAbled" id="idStudentPersonalSpeciallyAbled" disabled>
			    		<label class="form-check-label" for="exampleCheck1">Is Specially Abled</label>
			  	</div>
			  	 <hr>
				    <label  style="display:none" class="abled" for="studentPersonalSpeciallyAbledDetails">Details of Ability</label>
 				 <textarea  style="display:none" class="form-control abled" rows="5" name="studentPersonalSpeciallyAbledDetails" id="studentPersonalSpeciallyAbledDetails"></textarea>
 				 <hr>
	
			</div>
		</form>
		<div id="accordion1">
	 		 	<h3>Record Flow History</h3>
  				<div>
   		 		<p>
   			 		<div class="table-responsive">
    					<table class="table table-striped" id="gridTableStudentPersonal"></table>
    				</div>
    			</p>
  				</div>
   			</div>
    </p>
  </div>
  <div id="tabs-2">
  	<p>
		<div class="form-group" id="divClatDetails">
		    <h3>CLAT Details</h3>
		    <p>Please fill in this form.</p>
		    <hr>
		    <form id="formStudentClat">
		    <label for="clatApplicationNo"><b>CLAT Admit Card No</b></label>
		    <div class="input-group">
				<input type="text"  class="form-control"  placeholder="CLAT Admit Card No" name="clatApplicationNo"  id="clatApplicationNo" readonly required></input>
				<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="clatApplicationNo"></i></span>
			</div>
			<hr>
			<label for="rollNo"><b>CLAT Score</b></label>
			<div class="input-group">
		   	  <input type="text" class="form-control"  placeholder="CLAT Score" name="clatRollNo" id="clatRollNo" readonly required>
		   	  <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="clatRollNo"></i></span>
		    </div>
			<hr>
		    <label for="clatRank"><b>CLAT RANK</b></label>
		    <div class="input-group">
		   		<input type="text"  class="form-control"  placeholder="Enter CLAT RANK " name="clatRank" id="clatRank" readonly required>
		   		 <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="clatRank"></i></span>
		   	</div>	
		    <hr>
		    </form>
		    <div id="accordion2">
	 		 	<h3>Record Flow History</h3>
  				<div>
   		 		<p>
   			 		<div class="table-responsive">
    					<table class="table table-striped" id="gridTableStudentClat"></table>
    				</div>
    			</p>
  				</div>
   			</div>
		</div>
  	</p>
  </div>
  <div id="tabs-3" class="tabDivs">
		  <p>
		 	<div class="form-group">
			    <h1>Education Details</h1>
		 	<br>
		 	<div class="table-responsive">
				<table class="table table-bordered " id="gridTableStudentQualification"></table>
			</div>
		    </div>
		    </p>
		    		    		    <hr>
		    <div id="accordion5">
		 		 	<h3>Record Flow History</h3>
	  				<div>
	   		 		<p>
	   			 		<div class="table-responsive">
	    					<table class="table table-striped" id="gridTable5"></table>
	    				</div>
	    			</p>
	  				</div>
	   		</div>
	</div>
	 <div id="tabs-4" class="tabDivs">
		    <p>	
		    <h1>Guardian Details</h1>	 
		   		<div class="table-responsive">
					<table class="table table-bordered" id="guardianTable"></table>
				</div>
				<div id="accordionGuardian" class="accordion"></div>
			</p>
							<hr>
				<div id="accordion4">
		 		 	<h3>Record Flow History</h3>
	  				<div>
	   		 		<p>
	   			 		<div class="table-responsive">
	    					<table class="table table-striped" id="gridTable4"></table>
	    				</div>
	    			</p>
	  				</div>
	   			</div>
		  </div>
			  <div id="tabs-5" class="tabDivs">
		   <p>
		   <div class="form-group">
			    <h1>Bank Details</h1>
			    <p>Please fill in this form.</p>
			    <hr>
			    <form id="formStudentBank">
				    <label for="bank"><b>Bank</b></label>
			    	<input type="text" class="form-control"  placeholder="Bank Name" name="studentBankName" id="studentBankName"  readonly>
				    <br>
					<label for="accName"><b>Account Holder Name</b></label>
				     <input type="text" class="form-control"  placeholder="Account Holder Name" name="studentBankAccountHolderName" id="studentBankAccountHolderName"  readonly>					
					<br>
					<label for="accNo"><b>Account No</b></label>
				     <input type="text" class="form-control" pattern="^[a-zA-Z0-9-_]+( [a-zA-Z]+)*$" placeholder="Account Number" name="studentBankAccountNumber" id="studentBankAccountNumber"  readonly>
					<br>
				    <label for="Branch"><b>Branch</b></label>
				     <input type="text"  class="form-control"  pattern="^[a-zA-Z0-9-_]+( [a-zA-Z]+)*$"  placeholder="Branch Name" name="studentBankBranch" id="studentBankBranch" readonly>
				    <br>
				    <label for="IFSC"><b>IFSC</b></label>
				     <input type="text"  class="form-control"  placeholder="IFSC" name="studentBankIFSC" id="studentBankIFSC" readonly>
				    <br>
				    <hr>
				    </form>
				</div>
		    </p>
		  </div>  
  <div id="tabs-6">
  	<p>
		<div class="form-group">
		    <h1>Admission Info</h1>
		    <p>Please fill in this form.</p>
		    <hr>
		    <form id="formStudentAdmission">
		  	<input type="radio" name="studentAdmissionTypeD"  id="IS" value="IS" checked> Resident Indian<br>
		  	<input type="radio" name="studentAdmissionTypeD" id="FS" value="FS"> Foreign Candidate<br>
		  	<input type="radio" name="studentAdmissionTypeD" id="NRIS" value="NRIS"> NRI Sponsored 
		  	<hr>
		  	
			<label for="admissionNo"><b>Admission No</b></label>
			<div class="input-group">
		    	<input type="text" class="form-control"  placeholder="Admission No:" name="studentAdmissionUserCode" id="admissionNo" readonly>
		    </div>	
		  	<label for="by"><b>Select Program</b></label>
		  	<div class="input-group">
		    	<select name="studentAdmissionProgram" id="selectProgram1"  class="form-control admissionTab" disabled>
		    	</select>
		    	<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="selectProgram1"></i></span>
		  	</div>
		    <label for="by"><b>Select Batch</b></label>
		   	<div class="input-group">
		   		 <select name="studentAdmissionBatch" id="selectBatch1"  class="form-control admissionTab" disabled>
		    	</select>
		   		 <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="selectBatch1"></i></span>
			</div>
			<label for="by"><b>Select Semester</b></label>
			<div class="input-group">
			    <select name="studentAdmissionActiveSem" id="activeSem"  class="form-control admissionTab" disabled>
				    <option value="semester1">semester1</option>
				    <option value="semester2">semester2</option>
				    <option value="semester3">semester3</option>
				    <option value="semester4">semester4</option>
				    <option value="semester5">semester5</option>
				    <option value="semester6">semester6</option>
				    <option value="semester7">semester7</option>
				    <option value="semester8">semester8</option>
				    <option value="semester9">semester9</option>
			    </select>
			    <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="activeSem"></i></span>
			</div>	
		    <label for="studentAdmissionDistanceToInstitute"><b>Distance</b></label>
		    <div class="input-group">
		    <input type="text" class="form-control"  placeholder="Distance to Nuals" name="studentAdmissionDistanceToInstitute" id="studentAdmissionDistanceToInstitute" readonly>
		    <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentAdmissionDistanceToInstitute"></i></span>
		    </div>
			<hr>
		    
		    <label for="mappedFeeCategory"><b>Select Fee Category</b></label>
		    <div class="input-group">
		    	<select name="mappedFeeCategory" id="mappedFeeCategory"  class="form-control admissionTab" disabled>
		   		</select>	
			   <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="mappedFeeCategory"></i></span>
			</div> 
			<label for="admittedCategory"><b>Admitted Category</b></label>
		    <div class="input-group">
		    	<select name="admittedCategory" id="admittedCategory"  class="form-control admissionTab" disabled>
		   		</select>	
			   <span  class="input-group-addon"><i class="far fa-edit editable2  editable2 Select" support="admittedCategory"></i></span>
			</div>
			
			<label for="admittedCategory"><b>Admission Date</b></label>
		    <div class="input-group">
		     	<input type="text" class="form-control"  placeholder="Distance to Nuals" name="studentAdmissionDateTime" id="studentAdmissionDateTime" readonly>
		    	<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentAdmissionDateTime"></i></span>
			</div>
			
			
			<div class="row"> 
				<div class="col-md-10">
					<div id="accordion1"  style="display: none">
						<h4>Vacancy Status(Pending Student entries not accounted)</h4>
						<div id="accordInner">
							  <div class="table-responsive cell-border well">
							  <table id="gridTableDisplay" class="table table-striped">
							  <thead><tr><th>Max Seats</th><th>occupied</th></tr></thead>
							  <tbody id="reservTableBody"></tbody>
							  </table>
							  </div>
						 </div>
				    </div>
				</div>
				<div class="col-md-2">
					</div>
			</div>
			<label for="rollNo"><b>Roll No</b></label>
			<div class="input-group">
		    	<input type="text" class="form-control"  placeholder="Roll No" name="studentAdmissionRollNo" id="studentAdmissionRollNo" readonly>
		    	<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="rollNo"></i></span>
		    </div>
			<hr>
			 
		    <label for="regNo"><b>Reg No</b></label>
		    <div class="input-group">
		   		<input type="text"  class="form-control"  placeholder="Reg No" name="studentRegNo" id="studentRegNo" readonly >
		    	<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentRegNo"></i></span>
		    </div>
		     <hr>   	
		     <div class="form-check">
   				<input type="checkbox"  class="form-check-input" id="studentAdmissionInterUniversity" disabled>
   				<label class="form-check-label" for="exampleCheck1">Inter-University Transfer?</label>
 			  </div>
 				 <hr>
 			 <div class="form-group well" id="interUniversityDiv" style="display:none">
	 				<label for="rollNo"><b>Roll Number(Previous university)</b></label>
	 				 <div class="input-group">
			    		<input type="text"    class="form-control"  placeholder="Roll Number(Previous university)" name="studentAdmissionInterUniversityOldRollNo" id="studentAdmissionInterUniversityOldRollNo" readonly>
			    		<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentAdmissionInterUniversityOldRollNo"></i></span>
			    	 </div>
			    	<br>
			    	<label for="rollNo"><b>Admission No(Previous university)</b></label>
			    	<div class="input-group">
			    		<input type="text"   class="form-control"  placeholder="Admission No(Previous university)" name="studentAdmissionInterUniversityAdmissionNo" id="studentAdmissionInterUniversityAdmissionNo" readonly>
			    		<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentAdmissionInterUniversityAdmissionNo"></i></span>
			    	</div>
			    	<br>
			    	<label for="rollNo"><b>Previous University Details</b></label>
			    	<div class="input-group">
			    		<textarea class="form-control"     rows="5"  placeholder="Previous University Details" name="studentAdmissionInterUniversityOldUniversity" id="studentAdmissionInterUniversityOldUniversity" readonly></textarea>
			    		<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentAdmissionInterUniversityOldUniversity"></i></span>
			    	</div>
			    	<br>
			    	<label for="rollNo"><b>Program Name(Previous University)</b></label>
			    	<div class="input-group">
			    		<input type="text"    class="form-control"  placeholder="Program Name(Previous University)" name="studentAdmissionInterUniversityOldProgramName" id="studentAdmissionInterUniversityOldProgramName" readonly>
			    		<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentAdmissionInterUniversityOldProgramName"></i></span>
			    	</div>	
			    	<br>
			    	<label for="rollNo"><b>Semesters completed(Previous University)</b></label>
			    	<div class="input-group">
			    		<input type="number" class="form-control"  placeholder="No: of Semesters completed(Previous University)" name="studentAdmissionInterUniversitySemestersCompleted" id="studentAdmissionInterUniversitySemestersCompleted" readonly>
			    		<span  class="input-group-addon"><i class="far fa-edit editable2  editable2 " support="studentAdmissionInterUniversitySemestersCompleted"></i></span>
			    	</div>
			 </div>
			 <hr>
			 <div style="display:none">
			    <label for="studentAdmissionStatus"><b>Set Student Status to:</b></label>
			    <select name="studentAdmissionStatus" id="studentAdmissionStatus"  class="form-control" required>
			    <option value="valid">Approved</option>
			   	</select>	
		   	</div>
		   	<hr>
		    </form>
	    	<div id="accordion3">
	 		 	<h3>Record Flow History</h3>
  				<div>
   		 		<p>
   			 		<div class="table-responsive">
    					<table class="table table-striped" id="gridTableStudentAdmission"></table>
    				</div>
    			</p>
  				</div>
   			</div>
		</div>
  	</p>
  </div>
</div>
<script>
var currentEmail;
var currentMobile;
var currentUserCode;
var coreUserId;
var selectedUserCode;
var SelectedOrMappedUser;
var selectedProgram;
var selectedBatch;
var confirmedBatch;
var selectedFeeProcessArray=new Array();
var dataTableFormed=false;
var globalProgramCode;
function getUserIdFromUserCodes(userCodeArray)
{
	$.ajax(
	{
		"url":"userManagement/getUserDetailsByUserCode",
		data:{"userCodes":userCodeArray},
		success:function(data)
		{
			data=data.data;
			//$('#email').val(data[0]['email']);
			currentEmail=data[0]['email'];
			//$('#mobile').val(data[0]['mobile']);
			currentMobile=data[0]['mobile'];
			coreUserId=data[0]['id'];
			currentUserCode=data[0]['usercode'];
		}
	});
}
function getUserIdFromUserCode(userCode)
{
	$.ajax(
	{
		"url":"userManagement/getUserDetailsByUserCode",
		data:{"userCodes":userCode},
		success:function(data)
		{
			data=data.data;
			$('#studentEmail').val(data[0]['email']);
			currentEmail=data[0]['email'];
			$('#studentMobile').val(data[0]['mobile']);
			currentMobile=data[0]['mobile'];
			coreUserId=data[0]['id'];
			currentUserCode=data[0]['usercode'];
		}
	});
}
function getAllValidCommunity()
{
	$.ajax(
	{
		"url":"/religion/getAllValidCommunity",
		"method":"GET",
		success:function(data)
		{
			setUpDropDown('selectCommunity',data,'religionCommunityId','religionCommunityName');
		}
	});

}
function getAllQualifications()
{
	$.ajax(
	{
		"url":"/students/getAllEducationalQualifications",
		"method":"GET",
		success:function(data)
		{
			setUpDropDown('qualificationId',data,'qualificationId','qualificationName');
		}
	});
}
function getAllReligions()
{
	$.ajax(
		{
	   		url:'/religion/getAllReligions',
	   		method:'GET',
	   		success:function(data)
	   		{
	   			console.log("All courses");
	   			console.log(data);
	   			setUpDropDown("selectReligion",data,"religionId","religionName");
	   		},
	   		error:function(err)
	   		{
	   			showMessage(err);
	   		}
   		});
}
function getAllValidBoardOfExam()
{
	  $.ajax(
	  {
		 url:"/students/getAllBoardOfExaminations",
		 success:function(data)
		 {
			// setUpDropDown('studentQualificationBoard',data,'board_exam_name','board_exam_name');
			 setUpDropDown('editstudentQualificationBoard',data,'board_exam_name','board_exam_name');
			 
		 }
	  });
	  
}
function fileRetreive()
{
	  $('.getFile').unbind().bind('click',function()
	  {
		 var doc=$(this).attr('doc');
		 var ext=$(this).attr('ext')
		 var spec=$(this).attr('spec');
		 var docName=$(this).attr('doc');
		 console.log(doc)
		 console.log(ext)
		 console.log(spec)
		 console.log(docName)
		 var fileName;
		 if(typeof spec!='undefined')
		 {
			console.log("No Spec")
			fileName=spec+docName;
		 }
		 else
		 {
			console.log("Spec is present")
			fileName=docName;
		 }
		var pgm=globalProgramCode;
		console.log("checking pgm "+pgm);
		if(!pgm)
		{
			pgm=$('#selectProgram').val();
		}
		var batch=globalBatchCode;
		console.log("checking batch "+batch);
		if(!batch)
		{
			batch=$('#selectBatch').val();
		}
		var checkUrl=String(pgm)+"/"+String(batch)+"/"+String(SelectedOrMappedUser.replace(/\//g,'-').replace(/#/g,'-'))+"/"+fileName;
		var urlGen=rooturl+"/filerepo_public/minioFiles/nuals/"+String(pgm)+"/"+String(batch)+"/"+String(SelectedOrMappedUser.replace(/\//g,'-').replace(/#/g,'-'))+"/"+fileName+"."+ext;
		if(studentDocMap[checkUrl])
		{
			urlGen=rooturl+"/filerepo_public/minioFiles/nuals/"+checkUrl+"."+studentDocMap[checkUrl];	
		}
		console.log("confirming");
		console.log(urlGen);
		$('#imageFile').remove();
		$('#objectDiv').empty();
		var imgf=$('<object  class="img-responsive" style="width: 450px; height: 450px;" id="imageFile"></object >')
		$('#objectDiv').append(imgf);
		$('#imageFile').removeAttr('data');
		$('#imageFile').removeAttr('src');
		 $('#imageFile').attr('data',urlGen);
		 $('#imageModal').modal();
	  });	  
}
function fillQualificationDetails(data)
{
	$('#editstudentCode').val(data['studentQualificationIdentity']['mappedStudentPersonal']['studentCode']);
	$('#editqualificationId').val(data["studentQualificationIdentity"]["mappedQualification"]["qualificationId"]);
	$('#editqualificationName').val(data["studentQualificationIdentity"]["mappedQualification"]["qualificationName"]);
	$('#editstudentQualificationBoard').val(data["studentQualificationBoard"]);
	$('#editstudentQualificationInstitution').val(data["studentQualificationInstitution"]);
	//$('#editstudentQualificationPercentage').val(data["studentQualificationPercentage"]);
	$('#editstudentQualificationRegNo').val(data["studentQualificationRegNo"]);
	$('#editstudentQualificationGradeClass').val(data["studentQualificationGradeClass"]);
	$('#editstudentQualificationMarksObtained').val(data["studentQualificationMarksObtained"]);
	console.log("YEP>>>");
	console.log(data["studentQualificationMonthYearPass"]);
	if(data["studentQualificationMonthYearPass"])
	{
		$('#editstudentQualificationMonthYearPassID').val(data["studentQualificationMonthYearPass"]);
	}
	$('#editstudentQualificationTotalMarks').val(data["studentQualificationTotalMarks"]);
	if(data["studentQualificationLastQualification"]==true)
		$('#editstudentQualificationLastQualification').prop("checked", true);
	else
		$('#editstudentQualificationLastQualification').prop("checked", false);
	
	if(data["studentQualificationBreakInLastQualification"]==true)
		$('#editstudentQualificationBreakInLastQualification').prop("checked", true);
	else
		$('#editstudentQualificationBreakInLastQualification').prop("checked", false);
	if(data["studentQualificationTCNo"])
		$('#editstudentQualificationTCNo').val(data["studentQualificationTCNo"]);
	else
		$('#editstudentQualificationTCNo').val('');
	if(data["studentQualificationBreakReasonAndDetails"])
		$('#editstudentQualificationBreakReasonAndDetails').val(data["studentQualificationBreakReasonAndDetails"]);
	else
		$('#editstudentQualificationBreakReasonAndDetails').val('');
	if(data["studentQualificationTCIssuedDate"])
		$('#editstudentQualificationTCIssuedDate').val(data["studentQualificationTCIssuedDate"].split('T')[0]);
	else
		$('#editstudentQualificationTCIssuedDate').val('');
}
function getEducationDetailsByStudentCodeAndQualificationCode(studentCode,qualificationCode)
{
		$.ajax(
		{
	  		url:'/students/getEducationDetailsByStudentCodeAndQualificationCode',
	  	   	method:'GET',
	  	   	data:{"userCode":studentCode,"qualificationCode":qualificationCode},
	  	   	success:function(data)
	  	   	{
	  	   		console.log(data);
	  	   		fillQualificationDetails(data);
	  	   	},
	  	   	error:function(err)
	  	   	{
	  	   		showMessage(err);
	  	   	}
	  	 });	  
}
function disableUploads()
{
	$('.file').attr('disabled',true);
	$('.file').hide();
	$('.upload').attr('disabled',true);
	$('.upload').hide();
}
function enableUploads()
{
	$('.file').attr('disabled',false);
	$('.file').show();
	$('.upload').attr('disabled',false);
	$('.upload').show();
}
function setUpEduFileUpload(data)
{
	console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>");
	if((typeof data!='undefined'))//&&(typeof data[0]['studentQualificationBoard']!='undefined'))
	{
		//console.log(data[0]['studentQualificationBoard']);
		//console.log(data[0]['studentQualificationIdentity']['mappedQualification']);//[qualificationName]
		$('#eduFileTable').empty();
		for(var i=0;i<data.length;i++) 	
	  	{
			var qualId=data[i]['studentQualificationIdentity']['mappedQualification']['qualificationId'];
			var inst=data[i]['studentQualificationInstitution'];
			var qualiName=data[i]['studentQualificationIdentity']['mappedQualification']['qualificationName'];		
			var showString=qualiName+ '(' + data[i]["studentQualificationBoard"]+') from '+inst;
			var tr=$('<tr><td>' +showString	+'</td><td><button class="getFile"  spec="'+qualId+'" ext="jpg" doc="'+showString+'"><i class=" fas fa-archive" aria-hidden="true"></i></button></td></tr>')
			$('#eduFileTable').append(tr);
	  	}
	}
	//studentAdStatus=data['studentAdmissionStatus'];
	/*if(studentAdStatus=="valid"||studentAdStatus=="processing")
	{
		disableUploads();
	}
	else
	{
		enableUploads();
	}*/
	fileRetreive();	
	$('.upload').unbind().bind('click',function()
	{
		
		var doc=$(this).attr('doc');
		var spec=$(this).attr('spec');
		//alert(spec)
		var docName=$(this).attr('doc');
		var fileName;
		if(spec)
		{
			fileName=spec+docName;
		}
		else
		{
			fileName=docName;
		}
		var pgm=globalProgramCode;
		if(!pgm)
		{
			pgm=$('#selectProgram').val();
		}
		var batch=globalBatchCode;
		if(!batch)
		{
			batch=$('#selectBatch').val();
		}
		var urlGen=String(pgm)+"/"+String(batch)+"/"+String(SelectedOrMappedUser.replace(/\//g,'-').replace(/#/g,'-'));
		console.log("url generated "+urlGen);
		fileFormData.append('fileUrl',urlGen);
		fileFormData.append('fileName',fileName);
		$.ajax(
		{
			"url" : "/students_public/saveDocs",
			"method" : "POST",						
			data : fileFormData,
			processData: false, // Don't process the files
			contentType: false, 
			cache:false,
			enctype:"multipart/form-data",
			success : function(data) 
			{
				if(data=="success")
				{
					showMessage("File saved successfully");
				}
			},
			error : function(e)
			{
			}
		});
	});

	$('.avatar').unbind().bind('change', function(){
		console.log("File change event");
		if(validateFileSize(this,1024))
		{
			readURL(this,'avatarDisplay');
		}
	 });
	$('.file').unbind().bind('change', function(){
		var ext=$(this).attr('ext');
		var files = $(this).get(0).files;
		if (files.length > 0)
		{
			fileFormData = new FormData();
			fileFormData.forEach(function(val, key, fD){
			    // here you can add filtering conditions
			    fileFormData.delete(key)
			    });
			// loop through all the selected files
			for (var i = 0; i < files.length; i++) {
			var file = files[i];
			fileType = file["type"];
			var fullFileName=file.name;
			if(fullFileName.match(/\./g).length>1)
			{
				showMessage("Invalid File Type.Correct your file name or upload only file with extension "+ext);
				$(this).val('');
				return false;
			}
			else
			{
				var uploadExt=file.name.split('.')[1];
				if(uploadExt==ext)
				{
					fileFormData.append('file', file, file.name);
				}
				else
				{
					showMessage("Invalid File Type.Correct your file name or upload only file with extension "+ext);
					$(this).val('');
				}
				//fileFormData.append()
			}
			}
		  }
	 });
}
function loadStudentQualificationsForDocs()
{
	$.ajax(
	{
		url:'/students/getAllStudentQualifications',
	   	method:'GET',
	   	data:{"userCode":SelectedOrMappedUser},
	   	success:function(data)
	   	{
	   		setUpEduFileUpload(data);
	   	 	//loadStudentQualificationsForDocs(SelectedOrMappedUser);
	 	},
	   	error:function(err)
	   	{
	   		showMessage(err);
	   	}
	 });
}
function loadStudentQualifications()
{
	$.ajax(
	{
		url:'/students/getAllStudentQualifications',
	   	method:'GET',
	   	data:{"userCode":selectedUserCode},
	   	success:function(data)
	   	{
	   		console.log(">>>>>>>>>>>>>>>>>>>>>>  checking education data");
	   		console.log(data);
	  	    setUpDataTable(data,[{"studentCode":"Student ID"},{"studentPersonalStudentName":"Student"},{"qualificationId":"Qualification Id"},{"qualificationName":"qualification"}],'gridTableStudentQualification',null);
	  	    loadStudentQualificationsForDocs(SelectedOrMappedUser);
	  		onDataTableClick('gridTableStudentQualification',function()
	  		{
	  			console.log(selectedRowFromDataTable);	 
	  			loadStudentQualificationsForDocs();//(SelectedOrMappedUser);
	  			$(".editable2 Member").prop('readonly',true);
	  			$(".editable2 Member").attr('readonly',true);
	  			var studentCode=selectedRowFromDataTable[0];
	  			var qualificationCode=selectedRowFromDataTable[2];
	  		 	$('#dialogEudcationEdit').modal({backdrop: 'static', keyboard: false});
				getEducationDetailsByStudentCodeAndQualificationCode(studentCode,qualificationCode);
	  		});  
	   	},
	   	error:function(err)
	   	{
	   		showMessage(err);
	   	}
	 });
}
function getAllCategories()
{
	$.ajax(
	{
   		url:'/category/getAllCategories',
   		method:'GET',
   		success:function(data)
   		{
   			console.log(data);
   			setUpDropDown("selectCategory",data,"categoryId","categoryCode");
   			setUpDropDown("admittedCategory",data,"categoryId","categoryCode");
   		},
   		error:function(err)
   		{
   			showMessage(err);
   		}
 	});
}
function getAllCaste()
{
	$.ajax(
	{
   		url:'/religion/getAllReligionCategories',
   		method:'GET',
   		success:function(data)
   		{
   			setUpDropDown("selectReligionCaste",data,"religionCasteId","religionCasteName");
   		},
   		error:function(err)
   		{
   			showMessage(err);
   		}
	});	
}
function fillClatDetails(pd)
{
	 if(pd['clatApplicationNo']) 
	 	$('#clatApplicationNo').val(pd['clatApplicationNo']);
	 else
		 $('#clatApplicationNo').val('');
	 if(pd['clatRollNo'])
	 	$('#clatRollNo').val(pd['clatRollNo']);
	 else
		$('#clatRollNo').val('');
	 if(pd['clatRank'])
	 	$('#clatRank').val(pd['clatRank']);
	 else
		$('#clatRank').val('');
}
function getStudentClatDetails(studentId)
{
	$.ajax(
	{
		url:'/students/getClatDetails',
	   	method:'GET',
	   	data:{"userCodeStudentClat":studentId},
	   	success:function(data)
	   	{
	   		console.log(data);
	   		fillClatDetails(data);
	   	},
	   	error:function(err)
	   	{
	   		showError(err);
	   	}
	 });	  
}
function getStudentQualifications(studentUserCode)
{
		$.ajax(
		{
	  		url:'/students/getAllStudentQualifications',
	  	   	method:'GET',
	  	   	data:{"userCode":studentUserCode},
	  	   	success:function(data)
	  	   	{
	  	   		console.log("Executed successfully")
	  	  	    setUpDataTable(data,[{"studentCode":"Student ID"},{"studentPersonalStudentName":"Student"},{"qualificationId":"Qualification Id"},{"qualificationName":"qualification"},{"studentQualificationPercentage":"Percentage"}],'gridTableStudentQualification',null);
	  	  		onDataTableClick('gridTableStudentQualification',function()
	  	  		{
					//getEducationDetailsByStudentCodeAndQualificationCode(studentCode,qualificationCode);
	  	  		});  
	  	   	},
	  	   	error:function(err)
	  	   	{
	  	   		showMessage(err);
	  	   	}
	  	 });
}

function fillPersonalDetails(pd)
{
  try{
	 var dobToPresent="";
	 if(pd['studentPersonalDob'])
	 {
		var dob=String(pd['studentPersonalDob'].split('T')[0]);
		dobToPresent=dob.split('-')[2]+"/"+dob.split('-')[1]+"/"+dob.split('-')[0];
	 }
	 var dobDate=new Date(dobToPresent);
	 var tDate=new Date();
	 if(pd['studentPersonalAgeOnAdmission'])
	 	$('#ageOnAdmission').val(pd['studentPersonalAgeOnAdmission']);
	 else
		 $('#ageOnAdmission').val('');
	 if(pd['studentPersonalStudentName'])
	 	$('#studentPersonalStudentName').val(pd['studentPersonalStudentName']);
	 if(pd['studentPersonalAadhar'])
	 	$('#studentPersonalAadhar').val(pd['studentPersonalAadhar']);
	 if(pd['studentPersonalGender'])
	 	$('#studentPersonalGender').val(pd['studentPersonalGender']);
	 $('#studentPersonalDob').val(dobToPresent);
	 if(pd['studentPersonalMotherTounge'])
		 $('#mt').val(pd['studentPersonalMotherTounge']);
	 else
		 $('#mt').val('');
	 if(pd['studentPersonalMappedReligion'])
		 $('#selectReligion').val(pd['studentPersonalMappedReligion']['religionId']);
	 else
		 $('#selectReligion').val('');
	 
	 if(pd['studentPersonalMappedCategory'])
	 	$('#selectCategory').val(pd['studentPersonalMappedCategory']['categoryId']);
	 else
		$('#selectCategory').val('');
	 if(pd['studentPersonalMappedCaste'])
		 $('#selectReligionCaste').val(pd['studentPersonalMappedCaste']['religionCasteId']);
	 else
		 $('#selectReligionCaste').val('');
	 if(pd['studentPersonalPermanentAddress'])
	 	$('#studentPersonalPermanentAddress').val(pd['studentPersonalPermanentAddress']);
	 else
		$('#studentPersonalPermanentAddress').val('');
	 if(pd['studentPersonalCommunicationAddress'])
		 $('#studentPersonalCommunicationAddress').val(pd['studentPersonalCommunicationAddress']);
	 else
		 $('#studentPersonalCommunicationAddress').val(''); 
	 if(pd['studentPersonalBloodGroup']!=null)
		 $('#studentPersonalBloodGroup').val(pd['studentPersonalBloodGroup']);
	 else
		 $('#studentPersonalBloodGroup').val('');
	 if(pd['studentPersonalAllergyDetails'])
		 $('#studentPersonalAllergyDetails').val(pd['studentPersonalAllergyDetails']);
	 else
		 $('#studentPersonalAllergyDetails').val('');
	 if(pd['studentPersonalSpeciallyAbled']==null || pd['studentPersonalSpeciallyAbled']==false)
	 {
		 $('#idStudentPersonalSpeciallyAbled').attr('checked',false)
		 $('#idStudentPersonalSpeciallyAbled').prop('checked',false)
	 }
	 else
	 {
		 $('#idStudentPersonalSpeciallyAbled').attr('checked',false)
		 $('#idStudentPersonalSpeciallyAbled').prop('checked',false)
	 }
	 //idStudentPersonalSpeciallyAbled
	 if(pd['studentPersonalSpeciallyAbledDetails'])
		 $("#studentPersonalSpeciallyAbledDetails").val(pd['studentPersonalSpeciallyAbledDetails']);
	 else
		 $("#studentPersonalSpeciallyAbledDetails").val('');
	 if(pd['studentPersonalPassport'])
		 $('#studentPersonalPassport').val(pd['studentPersonalPassport']);
	 else
		 $('#studentPersonalPassport').val('');
	 if(pd['studentPersonalMappedCommunity'])
		 $("#selectCommunity").val(pd['studentPersonalMappedCommunity']['religionCommunityId']);
	 else
		 $('#selectCommunity').val('');
	 if(pd['studentPersonalCountry'])
	 	$('#studentPersonalCountry').val(pd['studentPersonalCountry']);
	 else
		 $('#studentPersonalCountry').val(''); 
	 
	 if((pd['studentPersonalSpeciallyAbled']==true)||(pd['studentPersonalSpeciallyAbled']=="true"))
	 {
	 	$("#idStudentPersonalSpeciallyAbled").prop("checked", true);
	 	$("#studentPersonalSpeciallyAbledDetails").show();
	 }
	  }
	  catch(e)
	  {
		  console.log("Error in processin personal data>>>>>>"+e);
	  }
}
function getStudentPersonalDetails(studentUserCode)
{
	$.ajax(
	{
		url:'/students/getPersonalDetails',
	   	method:'GET',
	   	data:{"userCode":studentUserCode},
	   	success:function(data)
	   	{
	   		console.log(data);
	   		fillPersonalDetails(data);
			$('#remarksShow').show();
  	   		getRecordTimeLines(studentUserCode,"student-personal");
	  	   	getRecordTimeLines2(studentUserCode,"student-clat");
	  		getRecordTimeLines3(studentUserCode,"student-admission");
	  		getRecordTimeLines4(SelectedOrMappedUser,"student-guardian");
	  		getRecordTimeLines5(SelectedOrMappedUser,"student-qualification");
	   	},
	   	error:function(err)
	   	{
	   		showMessage(err);
	   	}
	 });	  
}
function fillAdmissionDetails(data)
{
    if (data["studentAdmissionType"] == 'FS')
    {
    	$('#fnDocs').show();
    	$('#fnDocsHead').show();
    	$('#nriDocs').hide();
    	$('#nriDocsHead').hide();
    }
    else if (data["studentAdmissionType"] == 'NRIS') 
    {
    	$('#fnDocs').hide();
    	$('#fnDocsHead').hide();
    	$('#nriDocs').show();
    	$('#nriDocsHead').show();
          
    }
    else
    {
    	$('#fnDocs').hide();
    	$('#fnDocsHead').hide();
    	$('#nriDocs').hide();
    	$('#nriDocsHead').hide();
    
    }
   // $('#accordionDocDiv').accordion({collapsible: true,active: 'none', heightStyle: "content" ,autoHeight: false,navigation: true });
	var radioId=data["studentAdmissionType"];
	$('#'+radioId).prop('checked',true);
	//$('#selectBatch').val(data["studentAdmissionBatch"]);
	if(data["studentAdmissionRollNo"])
		$('#studentAdmissionRollNo').val(data["studentAdmissionRollNo"]);
	else
		$('#studentAdmissionRollNo').val('');
	if(data["studentAdmissionDistanceToInstitute"])
		$('#studentAdmissionDistanceToInstitute').val(data["studentAdmissionDistanceToInstitute"]);
	else
		$('#studentAdmissionDistanceToInstitute').val('');
	if(data["studentRegNo"])
		$('#studentRegNo').val(data["studentRegNo"]);
	else
		$('#studentRegNo').val('');
	$('#selectProgram1').val(data["studentAdmissionBatch"]["mappedCourse"]["courseId"]);
	$('#selectBatch1').val(data["studentAdmissionBatch"]["batchId"]);
	$('#activeSem').val(data["studentAdmissionActiveSem"]);
	$('#mappedFeeCategory').val(data["mappedFeeCategory"]["sfsFeeCategoryId"]);//
	$('#admittedCategory').val(data["admittedCategory"]["categoryId"]);//
	$('#admissionNo').val(data["studentAdmissionUserCode"]);
	if(data['studentAdmissionDateTime'])
	{
		$('#studentAdmissionDateTime').val(data['studentAdmissionDateTime'].split('T')[0]);
	}
	else
	{
		$('#studentAdmissionDateTime').val('');
	}
	
	if(data["studentAdmissionInterUniversity"])
	{
		if(data["studentAdmissionInterUniversity"]==true)
		{
			$('#studentAdmissionInterUniversity').prop('checked',true);
			$('#interUniversityDiv').show();
		}
		else
		{
			$('#studentAdmissionInterUniversity').prop('checked',false);
			$('#interUniversityDiv').hide();
		}
	}
	if(data["studentAdmissionInterUniversityOldRollNo"])
		$('#studentAdmissionInterUniversityOldRollNo').val(data["studentAdmissionInterUniversityOldRollNo"]);
	else
		$('#studentAdmissionInterUniversityOldRollNo').val('');
	if(data["studentAdmissionInterUniversityAdmissionNo"])
		$('#studentAdmissionInterUniversityAdmissionNo').val(data["studentAdmissionInterUniversityAdmissionNo"]);
	else
		$('#studentAdmissionInterUniversityAdmissionNo').val('');
	if(data["studentAdmissionInterUniversityOldUniversity"])
		$('#studentAdmissionInterUniversityOldUniversity').val(data["studentAdmissionInterUniversityOldUniversity"]);
	else
		$('#studentAdmissionInterUniversityOldUniversity').val('');
	if(data["studentAdmissionInterUniversityOldProgramName"])
		$('#studentAdmissionInterUniversityOldProgramName').val(data["studentAdmissionInterUniversityOldProgramName"]);
	else
		$('#studentAdmissionInterUniversityOldProgramName').val('');
	if(data['studentAdmissionInterUniversitySemestersCompleted'])
		$('#studentAdmissionInterUniversitySemestersCompleted').val(data['studentAdmissionInterUniversitySemestersCompleted']);
	else
		$('#studentAdmissionInterUniversitySemestersCompleted').val('');

}
function getAdmissionDetailsofStudent(studentUserCode)
{
	$.ajax(
	{
		"url":"/students/getAdmissionDetailofStudent",
		"method":"GET",
		data:{"studentAdmissionUserCode":studentUserCode},
		success:function(data)
		{
			fillAdmissionDetails(data);
			getDownloadFileDetails(studentUserCode);
		}
	});
}
function getDownloadFileDetails(studCode)
{
	if(studCode)
	{
		$.ajax(
		{
			"url":"/students/getStudentUploadsByStudentCode",
			"method":"GET",
			data:{"userCode":studCode},
			success:function(data)
			{
				if(data)
				{
					for(let i=0;i<data.length;i++)
					{
						studentDocMap[data[i]['uploadlink']]=data[i]['fileName'];
					}
				}
			}
		});
	}
}
function setUpGuardianView()
{
	$('#accordionGuardian').empty();
	if(SelectedOrMappedUser!=null)
	{
		$.ajax(
		{
			url:'/students/getGuardianFullDetails',
			method:'get',
			data:[{"name":"userCode","value":selectedUserCode}],
			success:function(data)
			{
				var guardianCodeArray=new Array();
				for(var i=0;i<data.length;i++)
				{
					guardianCodeArray.push(data[i]['studentGuardianIdentity']["guardianCode"]);	
				}
				getUserIdFromUserCodes(guardianCodeArray,"Guardian");
				setUpDataTable(data,[{"guardianRelation":"Relation"},{"guardianCode":"user id"},{"guardianName":"Name"}],'guardianTable',null);
				onDataTableClick('guardianTable',function()
				{
				    console.log(selectedRowFromDataTable);	 
				    var guardianId=selectedRowFromDataTable[1];
				    console.log("Guardian Id is "+guardianId);
				    $.ajax(
				    {
				    	"url":"/students/getGuardianDetailsByGuardianCode",
				    	"method":"get",
				    	"data":[{"name":"userCode","value":guardianId}],
				    	"success":function(data)
				    	{
				    		try
				    		{
					    		if(data!=null)
					    		{
					    			data=data[0];
					    			$('#editGuardianCode').val(data["guardianCode"]);
					    			$('#editGuardianName').val(data["guardianName"]);
					    			$('#editGuardianRelation').val(data["guardianRelation"]);
					    			$('#guardianPassPort1').val(data['guardianPassPort']);
					    			$('#guardianPassPortPlaceOfIssue1').val(data['guardianPassPortPlaceOfIssue']);
					    			$('#guardianPassPortDateOfIssue1').val(data['guardianPassPortDateOfIssue']);
					    			$('#guardianPassPortDateOfExpiry1').val(data['guardianPassPortDateOfExpiry']);
					    			$('#editGuardianQualification').val(data["guardianQualification"]);
					    			//$('#editGuardianOccupation').val(data["guardianOccupation"]);
					    			$('#editGuardianOccupation').val(data["guardianOccupation"]);
					    			$('#editGuardianOrganization').val(data["guardianOrganization"]);
					    			$('#editGuardianAnnaualIncome').val(data["guardianAnnaualIncome"]);
					    			$('#editGuardianOfficialAddress').val(data["guardianOfficialAddress"]);
					    			$('#editGuardianResidentialAddress').val(data["guardianResidentialAddress"]);
					    			$('#editguardianLandLine').val(data["guardianLandLine"]);
					    			//alert(data["guardianIsLocal"]);
					    			if(data["guardianIsLocal"]==false)
					    			{
					    				$('#editguardianIsLocal').prop('checked',false);
					    			}
					    			else
					    			{
					    				$('#editguardianIsLocal').prop('checked',true);	
					    			}
					    			if(data["isGuardianSponsor"]==false)
					    			{
					    				$('#editisGuardianSponsor').prop('checked',false);
					    			}
					    			else
					    			{
					    				$('#editisGuardianSponsor').prop('checked',true);	
					    			}
					    			if(data["isGuardianSponsor"]==null)
					    			{
					    				$('#editisGuardianSponsor').prop('checked',false);
					    			}
					    			$('#formEditGuardianUser').unbind().bind('submit',function(e)
					    			{
					    				e.preventDefault();
					    				var formData=$(this).serializeArray();
					    				var isLocal=false;
					    				if($('#editguardianIsLocal').prop('checked')==true)
					    				{
					    					isLocal=true;
					    				}
					    				formData.push({"name":"guardianIsLocal","value":isLocal});
					    				formData.push({"name":"mappedStudentPersonal","value":SelectedOrMappedUser});
					    				$.ajax(
		   	   	   			   			{
		   	   	   			   				url:'/students/addGuardianDetails',
		   	   	   			   				method:'post',
		   	   	   			   				data:formData,
		   	   	   			   				success:function(data)
		   	   	   			   				{
		   	   	   			   					if(typeof data["studentGuardianIdentity"]!="undefined")
		   	   	   			   					{
		   	   	   			   						showMessage("Guardian Details Updated");
		   	   	   			   						$('#editGuardianDialog').modal('hide');
		   	   	   			   					}
		   	   	   			   				}
		   	   	   			   			});
					    			});
					    		}
				    		}
				    		catch(e)
				    		{
				    			showMessage("Error processing Guardian Data");
				    		}
				    	}
				    });
				    $.ajax(
				    {
				    	"url":"userManagement/getUserByUserCode",
				    	"method":"GET",
				    	"data":{"userId":guardianId},
				    	"success":function(data)
				    	{
				    		try
				    		{
					    		if(data!=null)
					    		{
					    			console.log(data);
					    			data=data.data[0];
					    			$('#editEmail').val(data["email"]);
					    			$('#editMobile').val(data["mobile"]);
					    			$('#editUserCode').val(data["usercode"]);
					    			
					    		}
				    		}
				    		catch(e)
				    		{
				    			showMessage("Error processing Guardian Data");
				    		}
				    	}
				    });
				    $('#editGuardianDialog').modal({backdrop: 'static', keyboard: false});
					//getGuardianFullDetails(); 
				});
			},
			error:function(err)
			{
				alert("Error in data submission  "+err);
			}
 	   	});				
	}
}
function getGuardianDetailsFromUserCode(userCode)	
{	$.ajax(
	{
		url:'/students/getGuardianDetailsByGuardianCode',
		method:'get',
		data:{'userCode':userCode},
		success:function(data)
		{
			if(data)
			{
				data=data[0];
				console.log(data);
				//var note='This User is mapped as Guardian to student '+data['studentGuardianIdentity']["mappedStudentPersonal"]["studentPersonalStudentName"]+' with studentCode:'+data['studentGuardianIdentity']["mappedStudentPersonal"]["studentCode"]+'.Modifying this user-data will have global effect';
				//$('#guardNotification').text(note);
				$('#guardianName').val(data["guardianName"]);
				$('#guardianRelation').val(data["guardianRelation"]);
				$('#guardianQualification').val(data["guardianQualification"]);
				$('#guardianOccupation').val(data["guardianOccupation"]);
				$('#guardianOrganization').val(data["guardianOrganization"]);
				$('#guardianAnnualIncome').val(data["guardianAnnualIncome"]);
				$('#guardianOfficialAddress').val(data["guardianOfficialAddress"]);
				$('#guardianResidentialAddress').val(data["guardianResidentialAddress"]);
				$('#guardianLandLine').val(data["guardianLandLine"]);
				if(data["guardianIsLocal"]==false)
				{
					$('#guardianIsLocal').prop('checked',false);	
				}
				else
				{
					$('#guardianIsLocal').prop('checked',true);
				}
				
			}
		},
		error:function(err)
		{
			alert("Error in data submission  "+err);
		}
	   	});
}
function fillBankDetails(data)
{
	$('#studentBankName').val(data["studentBankName"]);
	$('#studentBankAccountHolderName').val(data["studentBankAccountHolderName"]);
	$('#studentBankAccountNumber').val(data["studentBankAccountNumber"]);
	$('#studentBankBranch').val(data["studentBankBranch"]);
	$('#studentBankIFSC').val(data["studentBankIFSC"]);
}
function getBankDetails(studentUserCode)
{
	$.ajax(
	{
		"url":"/students/getStudentBankDetails",
		"method":"GET",
		data:{"studentBankUserCode":studentUserCode},
		success:function(data)
		{
			fillBankDetails(data);		
		}
	});
}
function diff_years(dt2, dt1) 
{
   var diff =(dt2.getTime() - dt1.getTime()) / 1000;
   diff /= (60 * 60 * 24);
   return Math.abs(Math.round(diff/365.25));
}
function getUnverifiedStudents(pgm,batch)
{
	$.ajax(
	{
		url:"/students/getUnverifiedStudents",
		method:"get",
		data:{"courseId":pgm,"batchId":batch,"status":$('#selectStatus').val()},
		success:function(data)
		{
			console.log(data);
			if(dataTableFormed)
			{
				clearDataTable('gridTable');
			}
			setUpDataTable(data,[{"studentCode":"Admission No"},{"studentPersonalStudentName":"Name"}],'gridTable',null);
			dataTableFormed=true;
			onDataTableClick('gridTable',function()
			{
				var userCode=selectedRowFromDataTable[0];
				selectedUserCode=userCode;
				SelectedOrMappedUser=userCode;
				 $('#accordionDocDiv').show();
				console.log("User Code is>>>>>>>>>>>>>>> "+userCode);
				getUserIdFromUserCode([userCode]);
				getStudentClatDetails(userCode);
				//getStudentQualifications(userCode);
				getStudentPersonalDetails(userCode);
				getAdmissionDetailsofStudent(userCode);
				getBankDetails(selectedUserCode);
				loadStudentQualifications();
				setUpGuardianView();
				getStudentPinNotes();
				$('#buttonPersonalSubmit').attr('disabled',false);
				//getGuardianDetailsFromUserCode(selectedUserCode);
				$("#tabs" ).tabs();
				
				$("#tabs").show();
				$("#tabs").tabs("option", "active", 0);
				$('.editable2 ').prop("disbaled",true);
			});
		}
	});
}
$(document).ready(function()
{
	
	$('#btnContinue').unbind().bind('click',function()
	{
		getUnverifiedStudents($('#selectProgram').val(),$('#selectBatch').val());
		$('#accordionDocDiv').hide();
		$('#tabs').hide();
	});
	$('#accordionDocDiv').hide();
	$('#accordionDocDiv').accordion({collapsible: true,active: 'none', heightStyle: "content" ,autoHeight: false,navigation: true });
	$('#accordionDoc').accordion({collapsible: true,active: 'none', heightStyle: "content" ,autoHeight: false,navigation: true });
	getAllValidCommunity();
	getAllReligions();
	loadAllActiveFeeCategories();
	getAllPrograms();
	getAllCategories();
	getAllCaste();
	getAllValidBoardOfExam();
	$('#buttonPersonalSubmit').attr('disabled',false);
	  var d = new Date();
	  var n = d.getFullYear();
	  $('#studentQualificationMonthYearPassID').empty();
	  for(let i=n;i>(n-80);i--)
	  {
		  var op=$('<option value="'+i+'">'+String(i)+'</option>');
		  $('#studentQualificationMonthYearPassID').append(op);
		  
	  }
	  for(let i=n;i>(n-80);i--)
	  {
		  console.log(">>>>>>>>>>>>>>>>>>>>  adding years to qualification")
		  var op=$('<option value="'+i+'">'+String(i)+'</option>');
		  $('#editstudentQualificationMonthYearPassID').append(op);
		  
	  }
	  
	  //$("#tabs").tabs("option", "active", 1);//buttonEducationSubmit
	  $('#buttonEducationSubmit').attr('disabled',true);
	  $('#buttonGuardSave').attr('disabled',true);
	  $('#buttonBankSave').attr('disabled',true);
	  
	  $('#buttonEducationSubmit').on('click',function()
		{
		  $(this).attr('disabled',true);
		  showMessage("Education Details verified");
		  $("#tabs").tabs("option", "active", 3);
		  $('#buttonGuardSave').attr('disabled',false);
		})
	  //buttonGuardSave
	  	  $('#buttonGuardSave').on('click',function()
		{
		  $(this).attr('disabled',true);
		  showMessage("Guardian Details Approved");
		  $("#tabs").tabs("option", "active", 4);
		  $('#buttonBankSave').attr('disabled',false);
		})
	 
	  //buttonBankSave
	  	$('#buttonBankSave').on('click',function()
		{
		  $(this).attr('disabled',true);
		  showMessage("Bank Details Approved");
		  $("#tabs").tabs("option", "active", 5);
		  $('#buttonAdmissionSave').attr('disabled',false);
		  saveRecordTimeLine(SelectedOrMappedUser,"student-admission","valid");//processId,processName,status
		})
	  
	  
	  $('#studentPersonalDob').datepicker({
		    format: 'dd/mm/yyyy',							   
			autoclose:true,
			clearBtn:true
		}).on('changeDate',function(e)
		{
			console.log(e);
			var d=e.date;
			console.log(">>>>>>>>>>>>>");
			console.log(d);
			var dToday=new Date();
			dateDiffe=dToday-d;
			console.log(">>>>>>>>>>>>>>>>>  "+dateDiffe);
			console.log(diff_years(dToday,d));
			if((diff_years(dToday,d)<15) || dateDiffe<0 )
			{
				alert("Wrong Date Selection. Age Criteria does not match");	
			}
			else
			{
				$('#ageOnAdmission').val(diff_years(dToday,d));	
			}
		});
	 
	  function fillReservationData(data)
	  {
		 $('#reservTableBody').empty();
		 var str='<tr><td>'+data['batchReservationMaxSeats']+'</td><td>'+data['batchReservationOccupiedSeats']+'</td></tr>' 
		 $('#reservTableBody').append(str); 
		 $('#accordion1').accordion({active: 0,collapsible: true,active: 'none',autoHeight: true,navigation: true });
		 $('#accordion1').show();
		 $('#accordInner').height('auto');
	  } 
    function getBatchReservationDataForBatch(courseId,batchId,categoryId)
    {
  	  console.log("Firing ajax")
  	  $.ajax(
  	  {
  		 url:'/batch/getBatchReservationDataForBatch',
  		 method:'GET',
  		 data:{"courseId":courseId,"batchId":batchId,"categoryId":categoryId},
  		 success:function(data)
  		 {
  			 fillReservationData(data);
  		 }
  	  });
    }
	 
	$('#getReserDetails').unbind().bind('click',function()
	{
		$('#selectProgram1').prop('disabled',false);
		$('#selectBatch1').prop('disabled',false);
		$('#admittedCategory').prop('disabled',false);
		var courseId=$('#selectProgram1').val();
		var batchId=$('#selectBatch1').val();
		var catId=$('#admittedCategory').val();
		getBatchReservationDataForBatch(courseId,batchId,catId);
		$('#studentAdmissionProgram').prop('disabled',true);
		$('#studentAdmissionBatch').prop('disabled',true);
		$('#admittedCategory').prop('disabled',true);
	})
	  $('.editable2 ').unbind().bind('click',function()
	  {
		  var elem=$(this).attr("support");
		  if($("#"+elem).prop('readonly')==true)
		  {
			  $("#"+elem).attr("readonly", false);
			  $("#"+elem).prop("readonly", false);			  
		  }
		  else
		  {
			  $("#"+elem).attr("readonly", true);
			  $("#"+elem).prop("readonly", true);			  
		  }
	  });
	  $('.editable2 Select').unbind().bind('click',function()
	  {
		  var elem=$(this).attr("support");
		  if(($("#"+elem).prop('disabled')==true)||($("#"+elem).attr('disabled')==true))
		  {
		      $("#"+elem).prop( "disabled", false );
		  	  $("#"+elem).attr( "disabled", false );
		  }
		  else
		  {
			  $("#"+elem).prop( "disabled", true );	
			  $("#"+elem).attr( "disabled", true );
		  }
	  }) 
	$('#buttonClatDetails').attr("disabled", true);
	$('#buttonAdmissionSave').attr("disabled", true);
	$('.grouping').unbind().bind('change',function()
	{
		try
		{
			if(($('#selectProgram').val()!=null) && ($('#selectProgram').val()!="Select") && ($('#selectBatch').val()!=null) && ($('#selectBatch').val()!="Select") && ($('#selectBatch').val()!="") && ($('#selectSemester').val()!=null) && ($('#selectSemester').val()!="Select") && ($('#selectFeeCategory').val()!=null)  && ($('#selectFeeCategory').val()!="") )
			{
				$('#divFeeGroup').show();
				getAllFeeGroups();
				selectedProgram=parseInt($('#selectProgram').val());
				selectedBatch=parseInt($('#selectBatch').val());
				selectedSemester=$('#selectSemester').val();
				selectedFeeCategory=parseInt($('#selectFeeCategory').val());
			}
		}
		catch(e)
		{
			console.log("Error");
		}
	});
	$('#btnCallStudents').on('click',function()
	{
		var program=$('#selectProgram').val();
		//$('#selectProgram').attr("disabled", true);
		var batch=$('#selectBatch').val();
		globalBatchCode=batch;
		//$('#selectBatch').attr("disabled", true);
		getUnverifiedStudents(program,batch);
		$('#buttonPersonalSubmit').attr("disabled", false);
		//$(this).hide();
	});
	
	$('#btnDetails').unbind().bind('click',function()
	{
		var feeGroup=$('#selectFeeGroup').val();
		$('.grouping').attr("disabled", true);
		$('#selectFeeGroup').attr("disabled", true);
		$('.grouping').prop("disabled", true);
		$(this).attr("disabled", true);
		//getAllFeeHeadsMappedToGroup($('#selectFeeGroup').val());
		getAllFeeHeadAmountMapping(selectedProgram,selectedBatch,selectedSemester,selectedFeeCategory,feeGroup);
		$('#divGridTable').show();
		$('#finaliseButtonDiv').show();
		$('#detailsDiv').show();
	});
	function getAllFeeHeadsMappedToGroup(groupId)
	{
		$.ajax(
		{
			"url":"/fees/getAllFeeHeadsMappedToGroup",
			"method":"GET",
			data:{"groupId":groupId},
			success:function(data)
			{
				try
				{
					//setUpDataTable(data,)	
				}
				catch(e)
				{
					showError("Error in processing information.contact Admin");
				}
			}
			
		});			
	}
	function getAllFeeHeadAmountMapping(programId,batchId,semester,feeCategoryId,feeGroupId)
	{
		$.ajax(
		{
			"url":"/fees/getAllFeeHeadAmountMaps",
			"method":"GET",
			data:{"courseId":programId,"batchId":batchId,"semester":semester,"feeCategoryId":feeCategoryId,"feeGroupId":feeGroupId},
			success:function(data)
			{
				try
				{
					//gridTableMapper
					if(data)
					{
						$('#feeMapTableBody').empty();
						for(var i=0;i<data.length;i++)
						{
							var tr=$('<tr><td>'+data[i]["sfs_fee_head_name"]+'</td><td><input class="feeHeads" id="'+data[i]["sfs_fee_head_id"]+'" type="text" value="'+data[i]["fee_head_amount_map_amount"]+'"></input></td></tr>');
							$('#feeMapTableBody').append(tr);
						}
					}
				}
				catch(e)
				{
					showError("Error in processing information.contact Admin");
				}
			}
			
		});			
	}
	function loadAllActiveFeeCategories()
	{
	    $.ajax(
		{
			"url":"/fees/getAllActiveFeeCategories",
			"method":"GET",
			success:function(data)
			{
				setUpDropDown('selectFeeCategory',data,'sfsFeeCategoryId','sfsFeeCategoryName');
				setUpDropDown('mappedFeeCategory',data,'sfsFeeCategoryId','sfsFeeCategoryName');
			}
		});
	}
	function getAllPrograms()
	{
 		$.ajax(
 		{
   	   		url:'/course/getAllCourses',
   	   		method:'GET',
   	   		success:function(data)
   	   		{
   	   			setUpDropDown("selectProgram",data,"courseId","courseCode");
   	   			setUpDropDown("selectProgram1",data,"courseId","courseCode");
   	   			$('#selectProgram').unbind().bind('change',function()
   	   			{
   	   				globalProgramCode=$(this).val();
   	   				getAllActiveBatchesOfProgram($(this).val());
   	   			});
   	   		},
   	   		error:function(err)
   	   		{
   	   			showMessage(err);
   	   		}
   	   	});
	 }
	 function getAllActiveBatchesOfProgram(programId)
	 {
		$.ajax(
		{
	  		url:'/batch/getAllActiveBatchesInAProgram',
	  	   	method:'GET',
	  	   	data:{"courseId":programId},
	  	   	success:function(data)
	  	   	{
	  	   		console.log(data);
	  	   		setUpDropDown('selectBatch',data,'batchId','batchCode');
	  	   		setUpDropDown('selectBatch1',data,'batchId','batchCode');
	  	   		/*$('#selectBatch').unbind().bind('change',function()
	  	   		{
	  	   			getAllSemsForTheBatch($(this).val());	
	  	   		});*/
	  	   	},
	  	   	error:function(err)
	  	   	{
	  	   		showMessage(err);
	  	   	}
	  	 });	  
	  }		
	  function getAllSemsForTheBatch(batchId)
	  {
	 	 $.ajax(
		 {
			 url:'/batch/getAllSemestersInABatch',
			 method:'GET',
			 data:{"batchId":batchId},
			 success:function(data)
			 {
				try
				{
					if(data && data.length>0)
					{
						$('#activeSem').empty();
						for(var i=0;i<data.length;i++)
						{
							$('#selectSemester').append('<option>'+data[i]['semesterIdentity']['semesterCode']+'</option>');	
						}
					}
				}
				catch(e)
				{
					showError("Error in Processing Data.Contact Admin");
				}
			 	//setUpDropDown('activeSem',data,'semesterCode','semesterCode');
			 }
		  });
	  }
	  function getAllFeeGroups()
	  {
			$.ajax(
			{
				"url":"/fees/getAllFeeHeadGroups",
				"method":"GET",
				success:function(data)
				{
					try
					{
						console.log(data);
						setUpDropDown('selectFeeGroup',data,'sfsFeeHeadGroupId','sfsFeeHeadGroupName');
						$('#selectFeeGroup').unbind().bind('change',function()
						{
							if(($(this).val()!=null)&&($(this).val()!="")&&($(this).val()!="Select"))
							{
								$('#divButton').show();	
							}
							else
							{
								$('#divButton').hide();
							}
						});
					}
					catch(e)
					{
						showMesage("Error in processing information.contact Admin");
					}
				}
				
			});		
	  }
	  
	  function checkAndInsert(userCode)
	  {
		  $.ajax(
		  {
			 url:"/accounts/getAccountByName",
			 data:{"accNo":userCode},
			 success:function(data)
			 {
				if((data.accountId==null)||(data.accountId==undefined)||(data.accountId=='undefined'))
				{
				  var accountData=new Array();
				  accountData.push({"name":"accountName","value":userCode});
				  accountData.push({"name":"accountLedgerType","value":"student"});
				  accountData.push({"name":"crDrType","value":"cr"});
				  $.ajax(
				  {
					url:"/accounts/addAccount",
					method:'post',
					data:accountData,
					success:function(data)
					{
								
					}
				  });
				}
			 }
		  });
	  }
	  function updateReservation(pgmId,btchId,catId)
	  {
		$.ajax(
		{
			"url":"/batch/updateReservationOccupancy",
			"method":"GET",
			data:{"courseId":pgmId,"batchId":btchId,"categoryId":catId,"op":"add"},
			success:function(data)
			{
				console.log(data);
			}
		});
	  }
		$('#formStudentPersonal').unbind().bind('submit',function(e)
		{
			e.preventDefault();
			showMessage("Student Details Verified");
			$('#buttonPersonalSubmit').prop("disabled", true);
			$("formStudentPersonal :input").prop("disabled", true);
			$("#divStudentPersonal :input").attr("disabled", true);
			$('#buttonClatDetails').attr("disabled", false);
			saveRecordTimeLine(SelectedOrMappedUser,"student-personal","valid");
			$("#tabs").tabs("option", "active", 1);//buttonEducationSubmit
	 		/*if($('#idStudentPersonalSpeciallyAbled').val()=="on")
	 		{
	 			$('#idStudentPersonalSpeciallyAbled').val(true)
	 		}
	 		else
	 		{
	 			$('#idStudentPersonalSpeciallyAbled').val(false)
	 		}
			$('.studentPersonalSel').attr("disabled", false);
			var formData=new Array();
			if($('#selectCommunity').val()=='')
			{
				$('#selectCommunity').remove();
			}
			if($('#selectReligion').val()=='')
			{
				$('#selectReligion').remove();
			}
			if($('#selectReligionCaste').val()=='')
			{
				$('#selectReligionCaste').remove();
			}
			formData=$(this).serializeArray();
			var dob=$('#studentPersonalDob').val();
			dob=dob.split('/')[2]+"-"+dob.split('/')[1]+"-"+dob.split('/')[0];
			formData.push({"name":"studentPersonalDob","value":dob});
			formData.push({"name":"studentCode","value":selectedUserCode});
			$.ajax(
			{
				url:'/students/addPersonalDetails',
				method:'post',
				data:formData,
				success:function(data)
				{
					if(data)
					{
						showMessage("Student Details Verified");
						$('#buttonPersonalSubmit').prop("disabled", true);
						$("formStudentPersonal :input").prop("disabled", true);
						$("#divStudentPersonal :input").attr("disabled", true);
						$('#buttonClatDetails').attr("disabled", false);
						$("#tabs").tabs("option", "active", 1);//buttonEducationSubmit
					}
				},
				error:function(err)
				{
					alert("Error in data submission  "+err);
				}
	 	   	});*/				
		})

	 $('#formStudentClat').unbind().bind('submit',function(e)
	 {
		e.preventDefault();
		showMessage("Student CLAT Details Verified");
		$("#divClatDetails :input").attr("disabled", true);
		$('#buttonClatDetails').attr("disabled", true);
		//$('#buttonAdmissionSave').attr("disabled", false);
		$('#buttonEducationSubmit').attr('disabled',false);
		 saveRecordTimeLine(SelectedOrMappedUser,"student-clat","valid");
		$("#tabs").tabs("option", "active", 2);
		/*var formData=new Array();
		formData=$(this).serializeArray();
		formData.push({"name":"userCodeStudentClat","value":selectedUserCode});
		$.ajax(
		{
			url:'/students/addClatDetails',
			method:'post',
			data:formData,
			success:function(data)
			{
				if(typeof data["userCodeStudentClat"]!="undefined")
				{
					showMessage("Student CLAT Details Verified");
					$("#divClatDetails :input").attr("disabled", true);
					$('#buttonClatDetails').attr("disabled", true);
					//$('#buttonAdmissionSave').attr("disabled", false);
					$('#buttonEducationSubmit').attr('disabled',false)
					$("#tabs").tabs("option", "active", 2);
				}
			},
			error:function(err)
			{
				showMessage("Error in data submission  "+err);
			}
 	   	});	*/
 
	 });	 
	 $('#formStudentAdmission').unbind().bind('submit',function(e)
	 {
		var formData=new Array();
		e.preventDefault();
		$('.admissionTab').attr("disabled", false);
		selectedProgram=$('#selectProgram').val();
		confirmedBatch=$('#selectBatch1').val();
		var adType=$("input[name='studentAdmissionTypeD']:checked").val();
		if(typeof adType=='undefined' || adType==''||adType==null)
		{
			adType="IS";
		}
		formData=$(this).serializeArray();
		var interUni=false;
		if($('#studentAdmissionInterUniversity').prop("checked")==true)
		{
		    interUni=true;
		}
	  	else
	  	{
	  		interUni=false;
	  	}
		formData.push({"name":"studentAdmissionInterUniversity","value":interUni});
		formData.push({"name":"studentAdmissionType","value":adType});
		$.ajax(
		{
			url:'/students/addStudentAdmissionDetails',
			method:'post',
			data:formData,
			success:function(data)
			{
				if(data["studentAdmissionUserCode"])
				{
					console.log(data)
					$('#buttonAdmissionSave').attr("disabled", true);
					$("#tabs").tabs("option", "active", 6);
					if(data["studentAdmissionStatus"]=="valid")
					{
						var pgmId=data["studentAdmissionProgram"]["courseId"];
						var btchId=data["studentAdmissionBatch"]["batchId"];
						var catId=data["admittedCategory"]["categoryId"];
						updateReservation(pgmId,btchId,catId);
						$.ajax(
						{
							url:"/userManagement/ActivateOrInactivateUserByUserCode",
							method:'post',
							data:{"usercode":selectedUserCode,"active":true},
							success:function(data)
							{
								if(data)
								{
									showMessage("Student User successfully activated and Admission Details Saved");
									$.ajax(
									{
										url:"/fees/getFeeProcessingEntriesByStatus",
										method:'get',
										data:{"programId":selectedProgram,"batchId":confirmedBatch,"feeStatus":"verified"},
										success:function(data)
										{
											if(data)
											{
												$('#feeProcessTableBody').empty();
												if(data.length>0)
												{
													for(var i=0;i<data.length;i++)
													{
														var tr=$('<tr><td>'+data[i]["feeCollectionUniqueName"]+'</td><td><input type="checkbox" id="'+data[i]["feeCollectionUniqueName"]+'" class="feeProcessCheck" name="feeProcess" value="'+data[i]["feeCollectionUniqueName"]+'"></td></tr>');
														$('#feeProcessTableBody').append(tr);
													}
													$('.feeProcessCheck').on('change',function()
													{
														var feeName=$(this).attr('id');
														if ($(this).is(':checked'))
														{
															if(jQuery.inArray(feeName, selectedFeeProcessArray) == -1)
															{
																selectedFeeProcessArray.push(feeName);
															}
														}
														else
														{
															selectedFeeProcessArray = $.grep(selectedFeeProcessArray, function(value) 
															{
																  return value != feeName;
															});	
														}
													});
													
													$('#btnFeeProcess').unbind().bind('click',function()
													{
														$(this).attr("disabled", true);
														$.ajax(
														{
															url:"/fees/processFeeOfStudentDuringAdmission",
															method:'get',
															data:{"feeProcessArray":String(selectedFeeProcessArray),"userCode":selectedUserCode},
															success:function(data)
															{
																console.log(data);	
															}
														});
													});

												}										
											}
										}
									});
								}
								
							}
						});
						checkAndInsert(selectedUserCode);
					}
				}
			},
			error:function(err)
			{
				alert("Error in data submission  "+err);
			}
		  });	
	  });
});

</script>

<div class="modal fade" id="dialogEudcationEdit" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Qualification Info(You may edit this info)</h5>
        		 <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
	  </div>   
	   <div class="modal-body">
        	<form id="formEditQualificationDetails">
			 <div class="form-group">
				<h3>Qualification Info </h3>
				<p></p>
				<hr>
				<label for="editstudentCode"><b>Student Code</b></label>
				<input type="text"  class="form-control"   name="studentCode" id="editstudentCode" readonly>
				<hr>
				<br>
				<div class="input-group">
					<label for="editqualificationId"><b>Qualification-Id </b></label>	
					<div class="input-group">
					 <input  type="text" class="form-control editable2 Member" name="mappedQualification" id="editqualificationId" readonly >
    				</div>
				<label for="editqualificationName"><b>Qualifying Examination </b></label>	
				<div class="input-group">
					 <input  type="text" class="form-control editable2 Member" name="qualificationName" id="editqualificationName" readonly >
    			</div>
    			</div>
    			<br>
  				<label for="editstudentQualificationBoard"><b>Board of Qualifying Exam</b></label>
  				<div class="input-group">
					<input type="text" name="studentQualificationBoard" id="editstudentQualificationBoard"  class="form-control" readonly>
					
    				<!--  <span   class="input-group-addon"><i class="far fa-edit editable2 " support="editstudentQualificationBoard"></i></span> -->
  				</div>
				<br>  	
				
				<label for="editstudentQualificationInstitution"><b>Institution</b></label>
  				<div class="input-group">
					 <input type="text"  class="form-control editable2 Member" name="studentQualificationInstitution" id="editstudentQualificationInstitution" readonly >
    				<!--  <span   class="input-group-addon"><i class="far fa-edit editable2 " support="editstudentQualificationInstitution"></i></span> -->
  				</div>
  				<br>
				
				<label for="studentQualificationMarksObtained"><b>Marks/CGPA Obtained</b></label>	
				 <div class="input-group">
					<input type="number"  class="form-control"  placeholder="Marks/CGPA Obtained"  name="studentQualificationMarksObtained" id="editstudentQualificationMarksObtained" readonly>
					<!-- <span  class="input-group-addon"><i class="far fa-edit editable2 " support="editstudentQualificationMarksObtained"></i></span> -->
				 </div>	
				<br>
				<label for="studentQualificationTotalMarks"><b>Maximum Marks/Maximum Grade Point</b></label>
				<div class="input-group">	
		   			<input type="number"  class="form-control"  placeholder="Total Marks/Maximum Grade Point"  name="studentQualificationTotalMarks" id="editstudentQualificationTotalMarks" readonly >
					<!-- <span  class="input-group-addon"><i class="far fa-edit editable2 " support="editstudentQualificationTotalMarks"></i></span> -->
				</div>		
				 <br>
				<label for="editstudentQualificationRegNo"><b>Reg No</b></label>
  				<div class="input-group">
					 <input  pattern="^[a-zA-Z0-9-_]+( [a-zA-Z]+)*$"  type="text" class="form-control editable2 Member" name="studentQualificationRegNo" id="editstudentQualificationRegNo" readonly>
    				
  				</div>
				
				<label for="editstudentQualificationGradeClass"><b>Class</b></label>
				<div class="input-group">
					<input type="text" readonly name="studentQualificationGradeClass" id="editstudentQualificationGradeClass"  class="form-control" class="editable2 Member">
				</div>
  				<br>
  				
  				
  				<label for="studentQualificationMonthYearPass"><b>Year of Passing</b></label>
				<div class="input-group">
				<input type="text"  class="form-control"  id="editstudentQualificationMonthYearPassID" name="studentQualificationMonthYearPass" readonly ></select>
				
				</div>
  				
  				
  				 <div class="form-check">
    				<input type="checkbox"  class="form-check-input" id="editstudentQualificationLastQualification" readonly disabled>
    				<label class="form-check-label" for="exampleCheck1">Last Qualification?</label>
  				 </div>
  			<hr>
  			<div class="form-group" id="tcDetailsDiv2">
  			
  				 <label for="studentQualificationTCNo"><b>TC Number</b></label>
				 <input type="text"  class="form-control"  name="studentQualificationTCNo" id="editstudentQualificationTCNo" readonly>
				 
				 <hr>
				 <label for="studentQualificationTCIssuedDate"><b>TC Issue Date</b></label>
				 <input  readonly type="text"  class="form-control dp"   name="studentQualificationTCIssuedDate" id="editstudentQualificationTCIssuedDate" >
				 <hr>
				 <div class="form-check">
				 <input disabled type="checkbox"  class="form-check-input" id="editstudentQualificationBreakInLastQualification">
    			 <label class="form-check-label" for="exampleCheck1">Break in Last qualification?</label>
				 </div>
				 <hr>
				  <label for="studentQualificationBreakReasonAndDetails"><b>Details</b></label>
				  <textarea readonly class="form-control" rows="5"   name="studentQualificationBreakReasonAndDetails" id="editstudentQualificationBreakReasonAndDetails"></textarea>
					
			</div>
  				
				<hr>
				<!-- <button type="submit" class="btn btn-primary">Submit</button> -->
			</div>
			</form>
      </div>
      <div class="modal-footer">

      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="dialogGuardianAdd1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Guardian Info</h5>
         <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
	  </div>   
	  <div class="modal-body">
	   	<div class="form-group well">
		    <h1>Guardian Details</h1>
		    <p>Please fill in this form.</p>
		    <hr>
		   <form id="addGuardianForm1">
		   <label for="gEmail"><b>Guardian Email</b></label>
		    <input type="email" class="form-control"  placeholder="Guardian Email" name="email1" id="gEmail1"  required>
			<br>
			<label for="gMobile"><b>Guardian Mobile</b></label>
		    <input type="text"  pattern="[0-9]{5,20}"  class="form-control"  placeholder="Guardian Mobile" name="mobile1" id="gMobile1"  required>
			<br>
		    <button type="submit" id="buttonGuardianCheck" class="btn btn-primary">Submit</button>
		    </form>
		</div>
      </div>
      <div class="modal-footer">
      </div>
   		<div class="table-responsive">
			<table class="table table-striped" id="tableExistingGuardian">
			  <thead>
				<tr>
				  <th scope="col">User Id</th>
				  <th scope="col">Email</th>
				  <th scope="col">Mobile</th>
				  <th scope="col">Action</th>
				</tr>
			  </thead>
			</table>
		</div>
    </div>
  </div>
</div>

<div  autofocus class="modal fade" id="dialogGuardianAdd2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Guardian Info</h5>
        		 <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
	  </div>   
	   <div class="modal-body">
		<form id="studentGuardianAddForm">
		 <div class="form-group">
			<p id="guardNotification">Please fill in this form.</p>
			<br>
			<div class="row">
		 	<div class="col-md-12">
				<label for="guardianName"><b>Guardian Name</b></label>
				<input type="text" class="form-control"  placeholder="Guardian Name" name="guardianName" id="guardianName" required >
				<br>
				<label for="guardianRelation"><b>Relation to the candidate</b></label>
				<select name="guardianRelation" id="guardianRelation"  class="form-control">
					<option value="Father">Father</option>
					<option value="Mother">Mother</option>
					<option value="Brother">Brother</option>
					<option value="Sister">Sister</option>
					<option value="sponsor">Sponsor</option>
					<option value="others">others</option>
				</select>
				<br>
				<label for="grel"><b>Occupation</b></label>
				<input type="text" class="form-control"  placeholder="Guardian Occupation" name="guardianOccupation" id="guardianOccupation" >
				
				<label for="guardianOrganization"><b>Organization</b></label>
				<input type="text" class="form-control"  placeholder="Guardian Organiztion" name="guardianOrganization" id="guardianOrganization" >
				<br>
				<label for="guardianAnnualIncome"><b>Annual Income</b></label>
				<input type="number" class="form-control"  placeholder="Guardian Annual Income" name="guardianAnnualIncome" id="guardianAnnualIncome" >
				<br>
				<label for="gEmail"><b>Guardian Email</b></label>
				<input type="email" class="form-control"  placeholder="Guardian Email" name="gEmail" id="gEmail" >
				<br>
				<label for="gMobile"><b>Guardian Mobile</b></label>
				<input type="text"  pattern=[0-9]{10} class="form-control"  placeholder="Guardian Mobile" name="gMobile" id="gMobile" >
				<br>
				<label for="guardianOfficialAddress">Official Address</label>
				<textarea class="form-control" rows="5" name="guardianOfficialAddress" id="guardianOfficialAddress"></textarea>
				<br>
				<label for="guardianResidentialAddress">Present Residential Address</label>
				<textarea class="form-control" rows="5" id="guardianResidentialAddress" name="guardianResidentialAddress"></textarea>
			   <br>
			   
			   <label for="guardianLandLine"><b>Guardian Land Line</b></label>
				<input type="text"  pattern="[0-9]{11}" class="form-control"  placeholder="Guardian Land Line" name="guardianLandLine" id="guardianLandLine" >
				
			   <br>
			   	<div id="guardianPassPortDiv">
					<h3>Passport Details</h3>
						<div>
						<p>
							<div class="form-group">
								<label for"">Passport No:</label>
								<input type="text" class="form-control" id="guardianPassPort" name="guardianPassPort">
							 </div>
							 <div class="form-group">
								<label for"">Place of Issue:</label>
								<input type="text" class="form-control" id="guardianPassPortPlaceOfIssue" name="guardianPassPortPlaceOfIssue">
							 </div>
							 <div class="form-group">
								<label for"">Date of Issue:</label>
								<input type="text" class="form-control dp" id="guardianPassPortDateOfIssue" name="guardianPassPortDateOfIssue">
							 </div>
							 <div class="form-group">
								<label for"">Date of Expiry:</label>
								<input type="text" class="form-control dp" id="guardianPassPortDateOfExpiry" name="guardianPassPortDateOfExpiry">
							 </div>
						</p>					
						</div>
					<!-- <span  class="input-group-addon"><i class="far fa-edit editable2 " support="guardianPassPort1"></i></span> -->
				</div> 
			   
			    <div class="form-check">
				<input type="checkbox" class="form-check-input" id="guardianIsLocal" name="guardianIsLocal">
				<label class="form-check-label" for="exampleCheck1">Local Guardian</label>
			   </div>
				<hr>
	    		<button type="button" id="buttonGuardianSave" class="btn btn-primary">Save</button>
		    	<button style="display:none" type="button" id="buttonGuardianSave2" class="btn btn-primary">Save</button>
			<hr>
			</div>
			</div>
		</div>
	</form>
      </div>
      <div class="modal-footer">

      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="editGuardianDialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Guardian Details</h5>
        		 <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
	  </div>
      <div class="modal-body">
        	<form id="formEditGuardianUser">
			 <div class="form-group">
				<h4>Guardian Info </h4>
				<br>
                <div class="row">
                     <div class="col-md-12">
						<input  type="hidden"  class="form-control"   name="" id="editGuardianCode" readonly>
                       <label for="editUserCode"><b>User Code</b></label>	
					   <div class="input-group">
					 		<input  type="text" class="form-control editable2 Member" name="gaurdianCode" id="editUserCode" readonly >
    				 	</div>
                     </div>
	            </div>
	            <div class="row">         
                    <div class="col-md-12">
                    	<label for="editEmail"><b>Email</b></label>	
                       <div class="input-group">
					 		<input  type="email" class="form-control editable2 Member" name="email" id="editEmail" readonly >
    				 		<!-- <span class="input-group-addon"><i class="far fa-edit editable2 "  support="editEmail" ></i></span> -->
  						</div>
                    </div>
                 </div>
                   <div class="row"> 
                     <div class="col-md-12">
                     <label for="editGuardianName"><b>Mobile</b></label>	
					   <div class="input-group">
					 		<input  type="text" class="form-control editable2 Member" name="mobile" id="editMobile" readonly >
    				 		<!-- <span class="input-group-addon"><i class="far fa-edit editable2 "  support="editMobile" ></i></span> -->
  						</div>                         
                     </div>
                    </div> 
               	<hr>
                 </div>
        			<label for="editGuardianName"><b>Name</b></label>	
				<div class="input-group">
					 <input  type="text" class="form-control editable2 Member" name="guardianName" id="editGuardianName" readonly >
    				 
  				</div>
  				<label for="editGuardianRelation"><b>Relation</b></label>
  				<div class="input-group">
				    <input readonly type="text"  name="guardianRelation" id="editGuardianRelation"  class="form-control editable2 Member">
				</div>
				<br>
				
				<!-- <label for="editGuardianQualification"><b>Guardian Qualification</b></label>
  				<div class="input-group">
					 <input type="text" class="form-control editable2 Member" name="guardianQualification" id="editGuardianQualification" readonly >
    				 <span   class="input-group-addon"><i class="far fa-edit editable2 " support="editGuardianQualification"></i></span>
  				</div>
  				<br> -->
  				<label for="editGuardianOccupation"><b>Occupation</b></label>
  				<div class="input-group">
					 <input type="text" class="form-control editable2 Member" name="guardianOccupation" id="editGuardianOccupation" readonly>
    			</div>
				 <br>
				<label for="editGuardianOrganization"><b>Organization</b></label>
  				<div class="input-group">
					 <input type="text" class="form-control editable2 Member" name="guardianOrganization" id="editGuardianOrganization" readonly>
    			</div>
				 <br>
				<label for="editGuardianAnnaualIncome"><b>Annual Income</b></label>
  				<div class="input-group">
					 <input type="text" class="form-control editable2 Member" name="guardianAnnaualIncome" id="editGuardianAnnaualIncome" readonly>
    			</div>
				
				<label for="editGuardianOfficialAddress"><b>Official Address</b></label>
  				<div class="input-group">
					 <textarea class="form-control editable2 Member" rows="5"   name="guardianOfficialAddress" id="editGuardianOfficialAddress" readonly></textarea>
    			
  				</div>
  				
				<label for="editGuardianOfficialAddress"><b>Residential Address</b></label>
  				<div class="input-group">
					 <textarea class="form-control editable2 Member" rows="5"  name="guardianResidentialAddress" id="editGuardianResidentialAddress" readonly></textarea>
    			</div>		
  				 <br>
			   <label for="guardianLandLine"><b>Guardian Land Line</b></label>
			   <div class="input-group">
				<input type="text"  pattern="[0-9]{5,20}" class="form-control"  placeholder="Guardian Land Line" name="guardianLandLine" id="editguardianLandLine" readonly>
				<span  class="input-group-addon"><i class="far fa-edit editable2 "  support="editguardianLandLine"></i></span>
				</div>
			   <br>	
			   				<div id="guardianPassPortDiv1">
					<h3>Passport Details</h3>
						<div>
						<p>
							<div class="form-group">
								<label for"">Passport No:</label>
								<input type="text" class="form-control" id="guardianPassPort1" name="guardianPassPort" readonly>
							 </div>
							 <div class="form-group">
								<label for"">Place of Issue:</label>
								<input type="text" class="form-control" id="guardianPassPortPlaceOfIssue1" name="guardianPassPortPlaceOfIssue" readonly>
							 </div>
							 <div class="form-group">
								<label for"">Date of Issue:</label>
								<input type="text" class="form-control dp" id="guardianPassPortDateOfIssue1" name="guardianPassPortDateOfIssue" readonly>
							 </div>
							 <div class="form-group">
								<label for"">Date of Expiry:</label>
								<input type="text" class="form-control dp" id="guardianPassPortDateOfExpiry1" name="guardianPassPortDateOfExpiry" readonly>
							 </div>
						</p>					
						</div>
					<!-- <span  class="input-group-addon"><i class="far fa-edit editable2 " support="guardianPassPort1"></i></span> -->
				</div> 
			  <div class="form-check">
			    <input  type="checkbox" class="form-check-input" id=editguardianIsLocal disabled>
			    <label class="form-check-label" for="exampleCheck1">Local Guardian</label>
			  </div>
			   <hr>
			  <div class="form-check">
			    <input  type="checkbox" class="form-check-input" id=editisGuardianSponsor disabled>
			    <label class="form-check-label" for="exampleCheck1">is Sponsor?</label>
			  </div>
			  <hr>
				
			</div>
			</form>
			</div>
			<div class="modal-footer">
			</div>
		</div>
	</div>
</div>
<div  autofocus class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">File Display</h5>
        		 <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
	  </div>   
	   <div class="modal-body" id="objectDiv">
		<object  class="img-responsive" style="width: 450px; height: 450px;" id="imageFile"></object >
      </div>
      <div class="modal-footer">

      </div>
    </div>
  </div>
</div>